/*! For license information please see 52796.XdqrrTy3TiM.js.LICENSE.txt */
export const id=52796;export const ids=[52796];export const modules={9028:(t,e,i)=>{var n=i(62659),o=(i(8600),i(53449)),a=i(18791);(0,n.A)([(0,a.EM)("ha-chip-set")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[]}}),o.Y)},30454:(t,e,i)=>{i.d(e,{$W:()=>u,Dp:()=>g,EC:()=>o,S9:()=>m,XF:()=>s,b1:()=>h,bV:()=>a,lB:()=>d,lg:()=>c,mX:()=>y,oj:()=>l,rY:()=>v,vH:()=>p});var n=i(28825);const o="single",a=10,s=t=>{if("condition"in t&&Array.isArray(t.condition))return{condition:"and",conditions:t.condition};for(const e of["and","or","not"])if(e in t)return{condition:e,conditions:t[e]};return t},d=(t,e)=>{t.callService("automation","trigger",{entity_id:e,skip_condition:!0})},c=(t,e)=>t.callApi("DELETE",`config/automation/config/${e}`);let r;const l=(t,e)=>t.callApi("GET",`config/automation/config/${e}`),u=(t,e)=>t.callWS({type:"automation/config",entity_id:e}),h=(t,e,i)=>t.callApi("POST",`config/automation/config/${e}`,i),y=t=>{r=t,(0,n.o)("/config/automation/edit/new")},p=t=>{y({...t,id:void 0,alias:void 0})},v=()=>{const t=r;return r=void 0,t},g=(t,e,i,n)=>t.connection.subscribeMessage(e,{type:"subscribe_trigger",trigger:i,variables:n}),m=(t,e,i)=>t.callWS({type:"test_condition",condition:e,variables:i})},97353:(t,e,i)=>{i.d(e,{I$:()=>r,I3:()=>g,PV:()=>v,Po:()=>h,RK:()=>f,TB:()=>l,am:()=>a,jR:()=>c,ng:()=>s,nx:()=>m,o9:()=>d});var n=i(82931),o=i(25426);const a=(t,e)=>t.callWS({type:"device_automation/action/list",device_id:e}),s=(t,e)=>t.callWS({type:"device_automation/condition/list",device_id:e}),d=(t,e)=>t.callWS({type:"device_automation/trigger/list",device_id:e}),c=(t,e)=>t.callWS({type:"device_automation/action/capabilities",action:e}),r=(t,e)=>t.callWS({type:"device_automation/condition/capabilities",condition:e}),l=(t,e)=>t.callWS({type:"device_automation/trigger/capabilities",trigger:e}),u=["device_id","domain","entity_id","type","subtype","event","condition","platform"],h=(t,e,i)=>{if(typeof e!=typeof i)return!1;for(const a in e){var n,o;if(u.includes(a))if("entity_id"!==a||(null===(n=e[a])||void 0===n?void 0:n.includes("."))===(null===(o=i[a])||void 0===o?void 0:o.includes("."))){if(!Object.is(e[a],i[a]))return!1}else if(!y(t,e[a],i[a]))return!1}for(const n in i){var a,s;if(u.includes(n))if("entity_id"!==n||(null===(a=e[n])||void 0===a?void 0:a.includes("."))===(null===(s=i[n])||void 0===s?void 0:s.includes("."))){if(!Object.is(e[n],i[n]))return!1}else if(!y(t,e[n],i[n]))return!1}return!0},y=(t,e,i)=>!(!e||!i)&&(e.includes(".")&&(e=(0,o.Ox)(t)[e].id),i.includes(".")&&(i=(0,o.Ox)(t)[i].id),e===i),p=(t,e,i)=>{if(!i)return"<unknown entity>";if(i.includes(".")){const e=t.states[i];return e?(0,n.u)(e):i}const a=(0,o.P9)(e)[i];return a?(0,o.jh)(t,a)||i:"<unknown entity>"},v=(t,e,i)=>t.localize(`component.${i.domain}.device_automation.action_type.${i.type}`,{entity_name:p(t,e,i.entity_id),subtype:i.subtype?t.localize(`component.${i.domain}.device_automation.action_subtype.${i.subtype}`)||i.subtype:""})||(i.subtype?`"${i.subtype}" ${i.type}`:i.type),g=(t,e,i)=>t.localize(`component.${i.domain}.device_automation.condition_type.${i.type}`,{entity_name:p(t,e,i.entity_id),subtype:i.subtype?t.localize(`component.${i.domain}.device_automation.condition_subtype.${i.subtype}`)||i.subtype:""})||(i.subtype?`"${i.subtype}" ${i.type}`:i.type),m=(t,e,i)=>t.localize(`component.${i.domain}.device_automation.trigger_type.${i.type}`,{entity_name:p(t,e,i.entity_id),subtype:i.subtype?t.localize(`component.${i.domain}.device_automation.trigger_subtype.${i.subtype}`)||i.subtype:""})||(i.subtype?`"${i.subtype}" ${i.type}`:i.type),f=(t,e)=>{var i,n,o,a;return null===(i=t.metadata)||void 0===i||!i.secondary||null!==(n=e.metadata)&&void 0!==n&&n.secondary?null!==(o=t.metadata)&&void 0!==o&&o.secondary||null===(a=e.metadata)||void 0===a||!a.secondary?0:-1:1}},52796:(t,e,i)=>{i.r(e),i.d(e,{DialogDeviceAutomation:()=>p});var n=i(62659),o=i(76504),a=i(80792),s=(i(58068),i(40924)),d=i(18791),c=i(77664),r=(i(95439),i(97353)),l=i(14126),u=(i(95899),i(9028),i(30454)),h=i(95146);let y=(0,n.A)(null,(function(t,e){return{F:class extends e{constructor(e){super(),this.headerKey=void 0,this.type=void 0,t(this),this._localizeDeviceAutomation=e}},d:[{kind:"field",decorators:[(0,d.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.MZ)()],key:"deviceId",value:void 0},{kind:"field",decorators:[(0,d.MZ)({type:Boolean})],key:"script",value:()=>!1},{kind:"field",decorators:[(0,d.MZ)({attribute:!1})],key:"automations",value:()=>[]},{kind:"field",decorators:[(0,d.MZ)({attribute:!1})],key:"entityReg",value:void 0},{kind:"field",decorators:[(0,d.wk)()],key:"_showSecondary",value:()=>!1},{kind:"field",key:"_localizeDeviceAutomation",value:void 0},{kind:"method",key:"shouldUpdate",value:function(t){if(t.has("deviceId")||t.has("automations"))return!0;const e=t.get("hass");return!e||e.language!==this.hass.language}},{kind:"method",key:"render",value:function(){if(0===this.automations.length||!this.entityReg)return s.s6;const t=this._showSecondary?this.automations:this.automations.filter((t=>{var e;return!1===(null===(e=t.metadata)||void 0===e?void 0:e.secondary)}));return s.qy` <h3>${this.hass.localize(this.headerKey)}</h3> <div class="content"> <ha-chip-set> ${t.map(((t,e)=>{var i;return s.qy` <ha-assist-chip filled .index="${e}" @click="${this._handleAutomationClicked}" class="${null!==(i=t.metadata)&&void 0!==i&&i.secondary?"secondary":""}" .label="${this._localizeDeviceAutomation(this.hass,this.entityReg,t)}"> </ha-assist-chip> `}))} </ha-chip-set> ${!this._showSecondary&&t.length<this.automations.length?s.qy`<button class="link" @click="${this._toggleSecondary}"> Show ${this.automations.length-t.length} more... </button>`:""} </div> `}},{kind:"method",key:"_toggleSecondary",value:function(){this._showSecondary=!this._showSecondary}},{kind:"method",key:"_handleAutomationClicked",value:function(t){const e={...this.automations[t.currentTarget.index]};if(!e)return;if(delete e.metadata,this.script)return(0,h.AM)({sequence:[e]}),void(0,c.r)(this,"entry-selected");const i={};i[this.type]=[e],(0,u.mX)(i),(0,c.r)(this,"entry-selected")}},{kind:"field",static:!0,key:"styles",value:()=>[l.og,s.AH`h3{color:var(--primary-text-color)}.secondary{--ha-assist-chip-filled-container-color:rgba(
          var(--rgb-primary-text-color),
          0.07
        )}button.link{color:var(--primary-color)}`]}]}}),s.WF),p=((0,n.A)([(0,d.EM)("ha-device-actions-card")],(function(t,e){return{F:class extends e{constructor(){super(r.PV),t(this)}},d:[{kind:"field",key:"type",value:()=>"action"},{kind:"field",key:"headerKey",value:()=>"ui.panel.config.devices.automation.actions.caption"}]}}),y),(0,n.A)([(0,d.EM)("ha-device-conditions-card")],(function(t,e){return{F:class extends e{constructor(){super(r.I3),t(this)}},d:[{kind:"field",key:"type",value:()=>"condition"},{kind:"field",key:"headerKey",value:()=>"ui.panel.config.devices.automation.conditions.caption"}]}}),y),(0,n.A)([(0,d.EM)("ha-device-triggers-card")],(function(t,e){return{F:class extends e{constructor(){super(r.nx),t(this)}},d:[{kind:"field",key:"type",value:()=>"trigger"},{kind:"field",key:"headerKey",value:()=>"ui.panel.config.devices.automation.triggers.caption"}]}}),y),(0,n.A)([(0,d.EM)("dialog-device-automation")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[(0,d.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.wk)()],key:"_triggers",value:()=>[]},{kind:"field",decorators:[(0,d.wk)()],key:"_conditions",value:()=>[]},{kind:"field",decorators:[(0,d.wk)()],key:"_actions",value:()=>[]},{kind:"field",decorators:[(0,d.wk)()],key:"_params",value:void 0},{kind:"method",key:"showDialog",value:async function(t){this._params=t,await this.updateComplete}},{kind:"method",key:"closeDialog",value:function(){this._params=void 0,(0,c.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"method",key:"firstUpdated",value:function(t){(0,o.A)((0,a.A)(i.prototype),"firstUpdated",this).call(this,t),this.hass.loadBackendTranslation("device_automation")}},{kind:"method",key:"updated",value:function(t){if((0,o.A)((0,a.A)(i.prototype),"updated",this).call(this,t),!t.has("_params"))return;if(this._triggers=[],this._conditions=[],this._actions=[],!this._params)return;const{device:e,script:n}=this._params;(0,r.am)(this.hass,e.id).then((t=>{this._actions=t.sort(r.RK)})),n||((0,r.o9)(this.hass,e.id).then((t=>{this._triggers=t.sort(r.RK)})),(0,r.ng)(this.hass,e.id).then((t=>{this._conditions=t.sort(r.RK)})))}},{kind:"method",key:"render",value:function(){return this._params?s.qy` <ha-dialog open @closed="${this.closeDialog}" .heading="${this.hass.localize(`ui.panel.config.devices.${this._params.script?"script":"automation"}.create`,{type:this.hass.localize(`ui.panel.config.devices.type.${this._params.device.entry_type||"device"}`)})}"> <div @entry-selected="${this.closeDialog}"> ${this._triggers.length||this._conditions.length||this._actions.length?s.qy` ${this._triggers.length?s.qy` <ha-device-triggers-card .hass="${this.hass}" .automations="${this._triggers}" .entityReg="${this._params.entityReg}"></ha-device-triggers-card> `:""} ${this._conditions.length?s.qy` <ha-device-conditions-card .hass="${this.hass}" .automations="${this._conditions}" .entityReg="${this._params.entityReg}"></ha-device-conditions-card> `:""} ${this._actions.length?s.qy` <ha-device-actions-card .hass="${this.hass}" .automations="${this._actions}" .script="${this._params.script}" .entityReg="${this._params.entityReg}"></ha-device-actions-card> `:""} `:this.hass.localize("ui.panel.config.devices.automation.no_device_automations")} </div> <mwc-button slot="primaryAction" @click="${this.closeDialog}"> ${this.hass.localize("ui.common.close")} </mwc-button> </ha-dialog> `:s.s6}},{kind:"get",static:!0,key:"styles",value:function(){return l.nA}}]}}),s.WF))},53449:(t,e,i)=>{i.d(e,{Y:()=>r});var n=i(76513),o=i(18791),a=i(40924),s=i(52162);class d extends a.WF{get chips(){return this.childElements.filter((t=>t instanceof s.v))}constructor(){super(),this.internals=this.attachInternals(),a.S$||(this.addEventListener("focusin",this.updateTabIndices.bind(this)),this.addEventListener("update-focus",this.updateTabIndices.bind(this)),this.addEventListener("keydown",this.handleKeyDown.bind(this)),this.internals.role="toolbar")}render(){return a.qy`<slot @slotchange="${this.updateTabIndices}"></slot>`}handleKeyDown(t){const e="ArrowLeft"===t.key,i="ArrowRight"===t.key,n="Home"===t.key,o="End"===t.key;if(!(e||i||n||o))return;const{chips:a}=this;if(a.length<2)return;if(t.preventDefault(),n||o){return a[n?0:a.length-1].focus({trailing:o}),void this.updateTabIndices()}const s="rtl"===getComputedStyle(this).direction?e:i,d=a.find((t=>t.matches(":focus-within")));if(!d){return(s?a[0]:a[a.length-1]).focus({trailing:!s}),void this.updateTabIndices()}const c=a.indexOf(d);let r=s?c+1:c-1;for(;r!==c;){r>=a.length?r=0:r<0&&(r=a.length-1);const t=a[r];if(!t.disabled||t.alwaysFocusable){t.focus({trailing:!s}),this.updateTabIndices();break}s?r++:r--}}updateTabIndices(){const{chips:t}=this;let e;for(const i of t){const t=i.alwaysFocusable||!i.disabled;i.matches(":focus-within")&&t?e=i:(t&&!e&&(e=i),i.tabIndex=-1)}e&&(e.tabIndex=0)}}(0,n.__decorate)([(0,o.KN)()],d.prototype,"childElements",void 0);const c=a.AH`:host{display:flex;flex-wrap:wrap;gap:8px}`;let r=class extends d{};r.styles=[c],r=(0,n.__decorate)([(0,o.EM)("md-chip-set")],r)}};
//# sourceMappingURL=52796.XdqrrTy3TiM.js.map