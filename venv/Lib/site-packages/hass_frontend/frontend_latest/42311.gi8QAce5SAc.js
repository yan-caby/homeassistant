export const id=42311;export const ids=[42311];export const modules={5152:(e,o,r)=>{var t=r(62659),i=r(40924),a=r(18791);(0,t.A)([(0,a.EM)("ha-ansi-to-html")],(function(e,o){return{F:class extends o{constructor(...o){super(...o),e(this)}},d:[{kind:"field",decorators:[(0,a.MZ)()],key:"content",value:void 0},{kind:"method",key:"render",value:function(){return i.qy`${this._parseTextToColoredPre(this.content)}`}},{kind:"get",static:!0,key:"styles",value:function(){return i.AH`pre{overflow-x:auto;white-space:pre-wrap;overflow-wrap:break-word}.bold{font-weight:700}.italic{font-style:italic}.underline{text-decoration:underline}.strikethrough{text-decoration:line-through}.underline.strikethrough{text-decoration:underline line-through}.fg-red{color:var(--error-color)}.fg-green{color:var(--success-color)}.fg-yellow{color:var(--warning-color)}.fg-blue{color:var(--info-color)}.fg-magenta{color:#762671}.fg-cyan{color:#2cb5e9}.fg-white{color:#ccc}.bg-black{background-color:#000}.bg-red{background-color:var(--error-color)}.bg-green{background-color:var(--success-color)}.bg-yellow{background-color:var(--warning-color)}.bg-blue{background-color:var(--info-color)}.bg-magenta{background-color:#762671}.bg-cyan{background-color:#2cb5e9}.bg-white{background-color:#ccc}`}},{kind:"method",key:"_parseTextToColoredPre",value:function(e){const o=document.createElement("pre"),r=/\033(?:\[(.*?)[@-~]|\].*?(?:\007|\033\\))/g;let t=0;const i={bold:!1,italic:!1,underline:!1,strikethrough:!1,foregroundColor:null,backgroundColor:null},a=e=>{const r=document.createElement("span");i.bold&&r.classList.add("bold"),i.italic&&r.classList.add("italic"),i.underline&&r.classList.add("underline"),i.strikethrough&&r.classList.add("strikethrough"),null!==i.foregroundColor&&r.classList.add(`fg-${i.foregroundColor}`),null!==i.backgroundColor&&r.classList.add(`bg-${i.backgroundColor}`),r.appendChild(document.createTextNode(e)),o.appendChild(r)};let s;for(;null!==(s=r.exec(e));){const o=s.index;a(e.substring(t,o)),t=o+s[0].length,void 0!==s[1]&&s[1].split(";").forEach((e=>{switch(parseInt(e,10)){case 0:i.bold=!1,i.italic=!1,i.underline=!1,i.strikethrough=!1,i.foregroundColor=null,i.backgroundColor=null;break;case 1:i.bold=!0;break;case 3:i.italic=!0;break;case 4:i.underline=!0;break;case 9:i.strikethrough=!0;break;case 22:i.bold=!1;break;case 23:i.italic=!1;break;case 24:i.underline=!1;break;case 29:i.strikethrough=!1;break;case 30:case 39:i.foregroundColor=null;break;case 31:i.foregroundColor="red";break;case 32:i.foregroundColor="green";break;case 33:i.foregroundColor="yellow";break;case 34:i.foregroundColor="blue";break;case 35:i.foregroundColor="magenta";break;case 36:i.foregroundColor="cyan";break;case 37:i.foregroundColor="white";break;case 40:i.backgroundColor="black";break;case 41:i.backgroundColor="red";break;case 42:i.backgroundColor="green";break;case 43:i.backgroundColor="yellow";break;case 44:i.backgroundColor="blue";break;case 45:i.backgroundColor="magenta";break;case 46:i.backgroundColor="cyan";break;case 47:i.backgroundColor="white";break;case 49:i.backgroundColor=null}}))}return a(e.substring(t)),o}}]}}),i.WF)},59799:(e,o,r)=>{var t=r(62659),i=r(76504),a=r(80792),s=r(32503),n=r(50988),l=r(40924),c=r(18791),d=r(47394),h=r(34800);r(12731);(0,t.A)([(0,c.EM)("ha-select")],(function(e,o){class r extends o{constructor(...o){super(...o),e(this)}}return{F:r,d:[{kind:"field",decorators:[(0,c.MZ)({type:Boolean})],key:"icon",value:()=>!1},{kind:"field",decorators:[(0,c.MZ)({type:Boolean,reflect:!0})],key:"clearable",value:()=>!1},{kind:"method",key:"render",value:function(){return l.qy` ${(0,i.A)((0,a.A)(r.prototype),"render",this).call(this)} ${this.clearable&&!this.required&&!this.disabled&&this.value?l.qy`<ha-icon-button label="clear" @click="${this._clearValue}" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}"></ha-icon-button>`:l.s6} `}},{kind:"method",key:"renderLeadingIcon",value:function(){return this.icon?l.qy`<span class="mdc-select__icon"><slot name="icon"></slot></span>`:l.s6}},{kind:"method",key:"connectedCallback",value:function(){(0,i.A)((0,a.A)(r.prototype),"connectedCallback",this).call(this),window.addEventListener("translations-updated",this._translationsUpdated)}},{kind:"method",key:"disconnectedCallback",value:function(){(0,i.A)((0,a.A)(r.prototype),"disconnectedCallback",this).call(this),window.removeEventListener("translations-updated",this._translationsUpdated)}},{kind:"method",key:"_clearValue",value:function(){!this.disabled&&this.value&&(this.valueSetDirectly=!0,this.select(-1),this.mdcFoundation.handleChange())}},{kind:"field",key:"_translationsUpdated",value(){return(0,d.s)((async()=>{await(0,h.E)(),this.layoutOptions()}),500)}},{kind:"field",static:!0,key:"styles",value:()=>[n.R,l.AH`:host([clearable]){position:relative}.mdc-select:not(.mdc-select--disabled) .mdc-select__icon{color:var(--secondary-text-color)}.mdc-select__anchor{width:var(--ha-select-min-width,200px)}.mdc-select--filled .mdc-select__anchor{height:var(--ha-select-height,56px)}.mdc-select--filled .mdc-floating-label{inset-inline-start:12px;inset-inline-end:initial;direction:var(--direction)}.mdc-select--filled.mdc-select--with-leading-icon .mdc-floating-label{inset-inline-start:48px;inset-inline-end:initial;direction:var(--direction)}.mdc-select .mdc-select__anchor{padding-inline-start:12px;padding-inline-end:0px;direction:var(--direction)}.mdc-select__anchor .mdc-floating-label--float-above{transform-origin:var(--float-start)}.mdc-select__selected-text-container{padding-inline-end:var(--select-selected-text-padding-end,0px)}:host([clearable]) .mdc-select__selected-text-container{padding-inline-end:var(--select-selected-text-padding-end,12px)}ha-icon-button{position:absolute;top:10px;right:28px;--mdc-icon-button-size:36px;--mdc-icon-size:20px;color:var(--secondary-text-color);inset-inline-start:initial;inset-inline-end:28px;direction:var(--direction)}`]}]}}),s.o)},86242:(e,o,r)=>{r.d(o,{L:()=>t,_:()=>i});const t=e=>e.callApi("GET","error_log"),i="/api/error_log"},45177:(e,o,r)=>{if(r.d(o,{PS:()=>i,Tv:()=>n,VR:()=>a,lE:()=>l}),33524==r.j)var t=r(91087);const i=e=>e.data,a=e=>"object"==typeof e?"object"==typeof e.body?e.body.message||"Unknown error, see supervisor logs":e.body||e.message||"Unknown error, see supervisor logs":e,s=new Set([502,503,504]),n=e=>!!(e&&e.status_code&&s.has(e.status_code))||!(!e||!e.message||!e.message.includes("ERR_CONNECTION_CLOSED")&&!e.message.includes("ERR_CONNECTION_RESET")),l=async(e,o)=>(0,t.v)(e.config.version,2021,2,4)?e.callWS({type:"supervisor/api",endpoint:`/${o}/stats`,method:"get"}):i(await e.callApi("GET",`hassio/${o}/stats`))},69969:(e,o,r)=>{if(r.d(o,{GM:()=>s,MU:()=>n,OV:()=>a,RE:()=>l,Vo:()=>c,w9:()=>d}),33524==r.j)var t=r(91087);var i=r(45177);const a=async e=>{(0,t.v)(e.config.version,2021,2,4)?await e.callWS({type:"supervisor/api",endpoint:"/supervisor/reload",method:"post"}):await e.callApi("POST","hassio/supervisor/reload")},s=async e=>(0,t.v)(e.config.version,2021,2,4)?e.callWS({type:"supervisor/api",endpoint:"/supervisor/info",method:"get"}):(0,i.PS)(await e.callApi("GET","hassio/supervisor/info")),n=async e=>(0,t.v)(e.config.version,2021,2,4)?e.callWS({type:"supervisor/api",endpoint:"/info",method:"get"}):(0,i.PS)(await e.callApi("GET","hassio/info")),l=async(e,o)=>e.callApi("GET",`hassio/${o.includes("_")?`addons/${o}`:o}/logs`),c=e=>`/api/hassio/${e.includes("_")?`addons/${e}`:e}/logs`,d=async(e,o)=>{(0,t.v)(e.config.version,2021,2,4)?await e.callWS({type:"supervisor/api",endpoint:"/supervisor/options",method:"post",data:o}):await e.callApi("POST","hassio/supervisor/options",o)}},42311:(e,o,r)=>{var t=r(62659),i=r(76504),a=r(80792),s=(r(58068),r(23981),r(40924)),n=r(18791),l=r(6699),c=(r(12261),r(5152),r(54373),r(12731),r(59799),r(1683),r(8983)),d=r(86242),h=r(45177),u=r(69969),g=r(47394),p=r(27690);const v="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z";(0,t.A)([(0,n.EM)("error-log-card")],(function(e,o){class r extends o{constructor(...o){super(...o),e(this)}}return{F:r,d:[{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.MZ)()],key:"filter",value:()=>""},{kind:"field",decorators:[(0,n.MZ)()],key:"header",value:void 0},{kind:"field",decorators:[(0,n.MZ)()],key:"provider",value:void 0},{kind:"field",decorators:[(0,n.MZ)({type:Boolean,attribute:!0})],key:"show",value:()=>!1},{kind:"field",decorators:[(0,n.wk)()],key:"_isLogLoaded",value:()=>!1},{kind:"field",decorators:[(0,n.wk)()],key:"_logHTML",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_error",value:void 0},{kind:"method",key:"render",value:function(){return s.qy` <div class="error-log-intro"> ${this._error?s.qy`<ha-alert alert-type="error">${this._error}</ha-alert>`:""} ${this._logHTML?s.qy` <ha-card outlined> <div class="header"> <h1 class="card-header"> ${this.header||this.hass.localize("ui.panel.config.logs.show_full_logs")} </h1> <div> <ha-icon-button .path="${"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"}" @click="${this._refresh}" .label="${this.hass.localize("ui.common.refresh")}"></ha-icon-button> <ha-icon-button .path="${v}" @click="${this._downloadFullLog}" .label="${this.hass.localize("ui.panel.config.logs.download_full_log")}"></ha-icon-button> </div> </div> <div class="card-content error-log">${this._logHTML}</div> </ha-card> `:""} ${this._logHTML?"":s.qy` <mwc-button outlined @click="${this._downloadFullLog}"> <ha-svg-icon .path="${v}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.logs.download_full_log")} </mwc-button> <mwc-button raised @click="${this._refreshLogs}"> ${this.hass.localize("ui.panel.config.logs.load_logs")} </mwc-button> `} </div> `}},{kind:"field",key:"_debounceSearch",value(){return(0,g.s)((()=>this._isLogLoaded?this._refreshLogs():this._debounceSearch()),150,!1)}},{kind:"method",key:"firstUpdated",value:function(e){var o;(0,i.A)((0,a.A)(r.prototype),"firstUpdated",this).call(this,e),(null!==(o=this.hass)&&void 0!==o&&o.config.recovery_mode||this.show)&&(this.hass.loadFragmentTranslation("config"),this._refreshLogs())}},{kind:"method",key:"updated",value:function(e){(0,i.A)((0,a.A)(r.prototype),"updated",this).call(this,e),e.has("provider")&&(this._logHTML=void 0),e.has("show")&&this.show||e.has("provider")&&this.show?this._refreshLogs():e.has("filter")&&this._debounceSearch()}},{kind:"method",key:"_refresh",value:async function(e){const o=e.currentTarget;o.progress=!0,await this._refreshLogs(),o.progress=!1}},{kind:"method",key:"_downloadFullLog",value:async function(){const e=(new Date).toISOString().replace(/:/g,"-"),o="core"!==this.provider?(0,u.Vo)(this.provider):d._,r="core"!==this.provider?`${this.provider}_${e}.log`:`home-assistant_${e}.log`,t=await(0,c.e0)(this.hass,o);(0,p.R)(t.path,r)}},{kind:"method",key:"_refreshLogs",value:async function(){let e;if(this._logHTML=this.hass.localize("ui.panel.config.logs.loading_log"),"core"!==this.provider&&(0,l.x)(this.hass,"hassio"))try{return e=await(0,u.RE)(this.hass,this.provider),this.filter&&(e=e.split("\n").filter((e=>e.toLowerCase().includes(this.filter.toLowerCase()))).join("\n")),e?(this._logHTML=s.qy`<ha-ansi-to-html .content="${e}"> </ha-ansi-to-html>`,void(this._isLogLoaded=!0)):void(this._logHTML=this.hass.localize("ui.panel.config.logs.no_errors"))}catch(e){return void(this._error=this.hass.localize("ui.panel.config.logs.failed_get_logs",{provider:this.provider,error:(0,h.VR)(e)}))}else e=await(0,d.L)(this.hass);this._isLogLoaded=!0;const o=e&&e.split("\n");this._logHTML=o?(this.filter?o.filter((e=>this.filter?e.toLowerCase().includes(this.filter.toLowerCase()):e)):o).map((e=>e.includes("INFO")?s.qy`<div class="info">${e}</div>`:e.includes("WARNING")?s.qy`<div class="warning">${e}</div>`:e.includes("ERROR")||e.includes("FATAL")||e.includes("CRITICAL")?s.qy`<div class="error">${e}</div>`:s.qy`<div>${e}</div>`)):this.hass.localize("ui.panel.config.logs.no_errors")}},{kind:"field",static:!0,key:"styles",value:()=>s.AH`.error-log-intro{text-align:center;margin:16px}ha-card{padding-top:16px}.header{display:flex;justify-content:space-between;padding:0 16px}.card-header{color:var(--ha-card-header-color,--primary-text-color);font-family:var(--ha-card-header-font-family, inherit);font-size:var(--ha-card-header-font-size, 24px);letter-spacing:-.012em;line-height:48px;display:block;margin-block-start:0px;margin-block-end:0px;font-weight:400}ha-select{display:block;max-width:500px;width:100%}ha-icon-button{float:right}.error-log{font-family:var(--code-font-family, monospace);clear:both;text-align:left;padding-top:12px}.error-log>div{overflow:auto;overflow-wrap:break-word}.error-log>div:hover{background-color:var(--secondary-background-color)}.error{color:var(--error-color)}.warning{color:var(--warning-color)}mwc-button{direction:var(--direction)}`}]}}),s.WF)},27690:(e,o,r)=>{r.d(o,{R:()=>t});const t=(e,o="")=>{const r=document.createElement("a");r.target="_blank",r.href=e,r.download=o,document.body.appendChild(r),r.dispatchEvent(new MouseEvent("click")),document.body.removeChild(r)}}};
//# sourceMappingURL=42311.gi8QAce5SAc.js.map