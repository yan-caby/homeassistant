export const id=6988;export const ids=[6988];export const modules={28048:(t,i,e)=>{e.d(i,{c:()=>_});var s=e(76502),n=e(92849),o=e(1471),r=e(47038),a=e(24081),h=e(83378),d=e(69825);const c={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};let u=0;const l=new Map;function _(t,i,e){return function(t,i,e){var s;if(!e||t===h.Hh)return(0,d.a)("--history-unavailable-color",i);if(t===h.HV)return(0,d.a)("--history-unknown-color",i);const u=(0,a.mg)(e,t);if(!u)return;const l=(0,d.a)(u,i);if(!l)return;const _=(0,r.m)(e.entity_id),y=null===(s=c[_])||void 0===s?void 0:s[t];return y?(0,n.zm)((0,o.T)((0,n.Nc)((0,n.xp)(l)),y)):l}(t,i,e)||function(t,i){if(l.has(t))return l.get(t);const e=(0,s.fI)(u,i);return u++,l.set(t,e),e}(t,i)}},24349:(t,i,e)=>{e.a(t,(async(t,s)=>{try{e.r(i),e.d(i,{DEFAULT_HOURS_TO_SHOW:()=>m,HuiHistoryGraphCard:()=>b});var n=e(62659),o=e(76504),r=e(80792),a=e(40924),h=e(18791),d=e(69760),c=e(6699),u=e(1954),l=(e(12261),e(54373),e(12731),e(62665)),_=e(96951),y=e(15821),f=e(67990),v=e(19887),k=t([u,l]);[u,l]=k.then?(await k)():k;const g="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z",m=24;let b=(0,n.A)([(0,h.EM)("hui-history-graph-card")],(function(t,i){class s extends i{constructor(...i){super(...i),t(this)}}return{F:s,d:[{kind:"method",static:!0,key:"getConfigElement",value:async function(){return await Promise.all([e.e(27311),e.e(88201),e.e(61606),e.e(23006),e.e(38696),e.e(32839),e.e(93117)]).then(e.bind(e,37e3)),document.createElement("hui-history-graph-card-editor")}},{kind:"method",static:!0,key:"getStubConfig",value:function(){return{type:"history-graph",entities:["sun.sun"]}}},{kind:"field",decorators:[(0,h.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,h.wk)()],key:"_stateHistory",value:void 0},{kind:"field",decorators:[(0,h.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,h.wk)()],key:"_error",value:void 0},{kind:"field",key:"_names",value:()=>({})},{kind:"field",key:"_entityIds",value:()=>[]},{kind:"field",key:"_hoursToShow",value:()=>m},{kind:"field",key:"_interval",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"method",key:"getCardSize",value:function(){var t,i;return null!==(t=this._config)&&void 0!==t&&t.title?2:0+2*((null===(i=this._entityIds)||void 0===i?void 0:i.length)||1)}},{kind:"method",key:"setConfig",value:function(t){if(!t.entities||!Array.isArray(t.entities))throw new Error("Entities need to be an array");if(!t.entities.length)throw new Error("You must include at least one entity");const i=t.entities?(0,f.L)(t.entities):[];this._entityIds=[],i.forEach((t=>{this._entityIds.push(t.entity),t.name&&(this._names[t.entity]=t.name)})),this._hoursToShow=t.hours_to_show||m,this._config=t}},{kind:"method",key:"connectedCallback",value:function(){(0,o.A)((0,r.A)(s.prototype),"connectedCallback",this).call(this),this.hasUpdated&&this._subscribeHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,o.A)((0,r.A)(s.prototype),"disconnectedCallback",this).call(this),this._unsubscribeHistory()}},{kind:"method",key:"_subscribeHistory",value:async function(){if(!(0,c.x)(this.hass,"history")||this._subscribed)return;const{numeric_device_classes:t}=await(0,_.KL)(this.hass);this._subscribed=(0,l.IQ)(this.hass,(i=>{var e;this._subscribed&&(this._stateHistory=(0,l.Mm)(this.hass,i,this._entityIds,this.hass.localize,t,null===(e=this._config)||void 0===e?void 0:e.split_device_classes))}),this._hoursToShow,this._entityIds).catch((t=>{this._subscribed=void 0,this._error=t})),this._setRedrawTimer()}},{kind:"method",key:"_redrawGraph",value:function(){this._stateHistory&&(this._stateHistory={...this._stateHistory})}},{kind:"method",key:"_setRedrawTimer",value:function(){clearInterval(this._interval),this._interval=window.setInterval((()=>this._redrawGraph()),6e4)}},{kind:"method",key:"_unsubscribeHistory",value:function(){clearInterval(this._interval),this._subscribed&&(this._subscribed.then((t=>null==t?void 0:t())),this._subscribed=void 0)}},{kind:"method",key:"shouldUpdate",value:function(t){return(0,y.pY)(this,t)||t.size>1||!t.has("hass")}},{kind:"method",key:"updated",value:function(t){if((0,o.A)((0,r.A)(s.prototype),"updated",this).call(this,t),!(this._config&&this.hass&&this._hoursToShow&&this._entityIds.length))return;if(!t.has("_config")&&!t.has("hass"))return;const i=t.get("_config");!t.has("_config")||(null==i?void 0:i.entities)===this._config.entities&&(null==i?void 0:i.hours_to_show)===this._config.hours_to_show||(this._unsubscribeHistory(),this._subscribeHistory())}},{kind:"method",key:"render",value:function(){if(!this.hass||!this._config)return a.s6;const t=new Date;t.setHours(t.getHours()-this._hoursToShow);const i=`/history?${(0,v.KH)({entity_id:this._entityIds.join(","),start_date:t.toISOString()})}`;return a.qy` <ha-card> ${this._config.title?a.qy` <h1 class="card-header"> ${this._config.title} <a href="${i}"><ha-icon-button .path="${g}"></ha-icon-button></a> </h1> `:a.s6} <div class="content ${(0,d.H)({"has-header":!!this._config.title})}"> ${this._error?a.qy` <ha-alert alert-type="error"> ${this.hass.localize("ui.components.history_charts.error")}: ${this._error.message||this._error.code} </ha-alert> `:a.qy` <state-history-charts .hass="${this.hass}" .isLoadingData="${!this._stateHistory}" .historyData="${this._stateHistory}" .names="${this._names}" up-to-now .hoursToShow="${this._hoursToShow}" .showNames="${void 0===this._config.show_names||this._config.show_names}" .logarithmicScale="${this._config.logarithmic_scale||!1}" .minYAxis="${this._config.min_y_axis}" .maxYAxis="${this._config.max_y_axis}" .fitYData="${this._config.fit_y_data||!1}"></state-history-charts> `} </div> </ha-card> `}},{kind:"get",static:!0,key:"styles",value:function(){return a.AH`ha-card{height:100%}.card-header{justify-content:space-between;display:flex}.card-header ha-icon-button{--mdc-icon-button-size:24px;line-height:24px;color:var(--primary-text-color)}.content{padding:16px}.has-header{padding-top:0}`}}]}}),a.WF);s()}catch(t){s(t)}}))}};
//# sourceMappingURL=6988.UsNv4i194zI.js.map