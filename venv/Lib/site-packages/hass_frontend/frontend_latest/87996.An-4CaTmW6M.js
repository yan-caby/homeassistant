export const id=87996;export const ids=[87996];export const modules={80364:(e,t,i)=>{function a(e,t,i){return t.reduce(((e,t,a,o)=>{if(void 0!==e){if(!e[t]&&i){const i=o[a+1];e[t]=void 0===i||"number"==typeof i?[]:{}}return e[t]}}),e)}function o(e,t,i,o,s){const d=Array.isArray(e)?[...e]:{...e},l=o?a(d,o):d,r=s?a(d,s,!0):d;if(!Array.isArray(l)||!Array.isArray(r))return e;const n=l.splice(t,1)[0];return r.splice(i,0,n),d}i.d(t,{w:()=>o})},36639:(e,t,i)=>{i.d(t,{l:()=>a});const a=async e=>{if(navigator.clipboard)try{return void await navigator.clipboard.writeText(e)}catch(e){}const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},61674:(e,t,i)=>{var a=i(62659),o=i(51497),s=i(48678),d=i(40924),l=i(18791);(0,a.A)([(0,l.EM)("ha-checkbox")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",static:!0,key:"styles",value:()=>[s.R,d.AH`:host{--mdc-theme-secondary:var(--primary-color)}`]}]}}),o.L)},26250:(e,t,i)=>{var a=i(62659),o=i(76504),s=i(80792),d=i(40924),l=i(18791),r=i(45081),n=i(77664),h=i(48962);i(57780);const c={key:"Mod-s",run:e=>((0,n.r)(e.dom,"editor-save"),!0)},u=e=>{const t=document.createElement("ha-icon");return t.icon=e.label,t};(0,a.A)([(0,l.EM)("ha-code-editor")],(function(e,t){class a extends t{constructor(...t){super(...t),e(this)}}return{F:a,d:[{kind:"field",key:"codemirror",value:void 0},{kind:"field",decorators:[(0,l.MZ)()],key:"mode",value:()=>"yaml"},{kind:"field",key:"hass",value:void 0},{kind:"field",decorators:[(0,l.MZ)({type:Boolean})],key:"autofocus",value:()=>!1},{kind:"field",decorators:[(0,l.MZ)({type:Boolean})],key:"readOnly",value:()=>!1},{kind:"field",decorators:[(0,l.MZ)({type:Boolean,attribute:"autocomplete-entities"})],key:"autocompleteEntities",value:()=>!1},{kind:"field",decorators:[(0,l.MZ)({type:Boolean,attribute:"autocomplete-icons"})],key:"autocompleteIcons",value:()=>!1},{kind:"field",decorators:[(0,l.MZ)({type:Boolean})],key:"error",value:()=>!1},{kind:"field",decorators:[(0,l.wk)()],key:"_value",value:()=>""},{kind:"field",key:"_loadedCodeMirror",value:void 0},{kind:"field",key:"_iconList",value:void 0},{kind:"set",key:"value",value:function(e){this._value=e}},{kind:"get",key:"value",value:function(){return this.codemirror?this.codemirror.state.doc.toString():this._value}},{kind:"get",key:"hasComments",value:function(){if(!this.codemirror||!this._loadedCodeMirror)return!1;const e=this._loadedCodeMirror.highlightingFor(this.codemirror.state,[this._loadedCodeMirror.tags.comment]);return!!this.renderRoot.querySelector(`span.${e}`)}},{kind:"method",key:"connectedCallback",value:function(){(0,o.A)((0,s.A)(a.prototype),"connectedCallback",this).call(this),this.hasUpdated&&this.requestUpdate(),this.addEventListener("keydown",h.d),this.codemirror&&!1!==this.autofocus&&this.codemirror.focus()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,o.A)((0,s.A)(a.prototype),"disconnectedCallback",this).call(this),this.removeEventListener("keydown",h.d),this.updateComplete.then((()=>{this.codemirror.destroy(),delete this.codemirror}))}},{kind:"method",key:"scheduleUpdate",value:async function(){var e;null!==(e=this._loadedCodeMirror)&&void 0!==e||(this._loadedCodeMirror=await Promise.all([i.e(380),i.e(73734),i.e(46054)]).then(i.bind(i,46054))),(0,o.A)((0,s.A)(a.prototype),"scheduleUpdate",this).call(this)}},{kind:"method",key:"update",value:function(e){if((0,o.A)((0,s.A)(a.prototype),"update",this).call(this,e),!this.codemirror)return void this._createCodeMirror();const t=[];e.has("mode")&&t.push({effects:this._loadedCodeMirror.langCompartment.reconfigure(this._mode)}),e.has("readOnly")&&t.push({effects:this._loadedCodeMirror.readonlyCompartment.reconfigure(this._loadedCodeMirror.EditorView.editable.of(!this.readOnly))}),e.has("_value")&&this._value!==this.value&&t.push({changes:{from:0,to:this.codemirror.state.doc.length,insert:this._value}}),t.length>0&&this.codemirror.dispatch(...t),e.has("error")&&this.classList.toggle("error-state",this.error)}},{kind:"get",key:"_mode",value:function(){return this._loadedCodeMirror.langs[this.mode]}},{kind:"method",key:"_createCodeMirror",value:function(){if(!this._loadedCodeMirror)throw new Error("Cannot create editor before CodeMirror is loaded");const e=[this._loadedCodeMirror.lineNumbers(),this._loadedCodeMirror.history(),this._loadedCodeMirror.drawSelection(),this._loadedCodeMirror.EditorState.allowMultipleSelections.of(!0),this._loadedCodeMirror.rectangularSelection(),this._loadedCodeMirror.crosshairCursor(),this._loadedCodeMirror.highlightSelectionMatches(),this._loadedCodeMirror.highlightActiveLine(),this._loadedCodeMirror.keymap.of([...this._loadedCodeMirror.defaultKeymap,...this._loadedCodeMirror.searchKeymap,...this._loadedCodeMirror.historyKeymap,...this._loadedCodeMirror.tabKeyBindings,c]),this._loadedCodeMirror.langCompartment.of(this._mode),this._loadedCodeMirror.haTheme,this._loadedCodeMirror.haSyntaxHighlighting,this._loadedCodeMirror.readonlyCompartment.of(this._loadedCodeMirror.EditorView.editable.of(!this.readOnly)),this._loadedCodeMirror.EditorView.updateListener.of(this._onUpdate)];if(!this.readOnly){const t=[];this.autocompleteEntities&&this.hass&&t.push(this._entityCompletions.bind(this)),this.autocompleteIcons&&t.push(this._mdiCompletions.bind(this)),t.length>0&&e.push(this._loadedCodeMirror.autocompletion({override:t,maxRenderedOptions:10}))}this.codemirror=new this._loadedCodeMirror.EditorView({state:this._loadedCodeMirror.EditorState.create({doc:this._value,extensions:e}),parent:this.renderRoot})}},{kind:"field",key:"_getStates",value:()=>(0,r.A)((e=>{if(!e)return[];return Object.keys(e).map((t=>({type:"variable",label:t,detail:e[t].attributes.friendly_name,info:`State: ${e[t].state}`})))}))},{kind:"method",key:"_entityCompletions",value:function(e){const t=e.matchBefore(/[a-z_]{3,}\.\w*/);if(!t||t.from===t.to&&!e.explicit)return null;const i=this._getStates(this.hass.states);return i&&i.length?{from:Number(t.from),options:i,validFor:/^[a-z_]{3,}\.\w*$/}:null}},{kind:"field",key:"_getIconItems",value(){return async()=>{if(!this._iconList){let e;e=(await i.e(25143).then(i.t.bind(i,25143,19))).default,this._iconList=e.map((e=>({type:"variable",label:`mdi:${e.name}`,detail:e.keywords.join(", "),info:u})))}return this._iconList}}},{kind:"method",key:"_mdiCompletions",value:async function(e){const t=e.matchBefore(/mdi:\S*/);if(!t||t.from===t.to&&!e.explicit)return null;const i=await this._getIconItems();return{from:Number(t.from),options:i,validFor:/^mdi:\S*$/}}},{kind:"field",key:"_onUpdate",value(){return e=>{e.docChanged&&(this._value=e.state.doc.toString(),(0,n.r)(this,"value-changed",{value:this._value}))}}},{kind:"get",static:!0,key:"styles",value:function(){return d.AH`:host(.error-state) .cm-gutters{border-color:var(--error-state-color,red)}`}}]}}),d.mN)},87996:(e,t,i)=>{var a=i(62659),o=i(40924),s=i(18791),d=i(45081),l=i(68286),r=i(77664),n=i(47038),h=i(25425),c=i(16327),u=i(80364),v=i(58587),y=i(94988),p=i(92483),f=(i(61674),i(12731),i(33066),i(44891),i(93487),i(20520),i(17876));const k=e=>e.selector&&!e.required&&!("boolean"in e.selector&&e.default);(0,a.A)([(0,s.EM)("ha-service-control")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"value",value:void 0},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean,reflect:!0})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"showAdvanced",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean,reflect:!0})],key:"hidePicker",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"hideDescription",value:()=>!1},{kind:"field",decorators:[(0,s.wk)()],key:"_value",value:void 0},{kind:"field",decorators:[(0,s.wk)()],key:"_checkedKeys",value:()=>new Set},{kind:"field",decorators:[(0,s.wk)()],key:"_manifest",value:void 0},{kind:"field",decorators:[(0,s.P)("ha-yaml-editor")],key:"_yamlEditor",value:void 0},{kind:"method",key:"willUpdate",value:function(e){var t,i,a,o,s,d,l,h;if(this.hasUpdated||(this.hass.loadBackendTranslation("services"),this.hass.loadBackendTranslation("selector")),!e.has("value"))return;const c=e.get("value");(null==c?void 0:c.service)!==(null===(t=this.value)||void 0===t?void 0:t.service)&&(this._checkedKeys=new Set);const u=this._getServiceInfo(null===(i=this.value)||void 0===i?void 0:i.service,this.hass.services);var v;null!==(a=this.value)&&void 0!==a&&a.service?null!=c&&c.service&&(0,n.m)(this.value.service)===(0,n.m)(c.service)||this._fetchManifest((0,n.m)(null===(v=this.value)||void 0===v?void 0:v.service)):this._manifest=void 0;if(u&&"target"in u&&(null!==(o=this.value)&&void 0!==o&&null!==(o=o.data)&&void 0!==o&&o.entity_id||null!==(s=this.value)&&void 0!==s&&null!==(s=s.data)&&void 0!==s&&s.area_id||null!==(d=this.value)&&void 0!==d&&null!==(d=d.data)&&void 0!==d&&d.device_id)){var y,p,f;const e={...this.value.target};!this.value.data.entity_id||null!==(y=this.value.target)&&void 0!==y&&y.entity_id||(e.entity_id=this.value.data.entity_id),!this.value.data.area_id||null!==(p=this.value.target)&&void 0!==p&&p.area_id||(e.area_id=this.value.data.area_id),!this.value.data.device_id||null!==(f=this.value.target)&&void 0!==f&&f.device_id||(e.device_id=this.value.data.device_id),this._value={...this.value,target:e,data:{...this.value.data}},delete this._value.data.entity_id,delete this._value.data.device_id,delete this._value.data.area_id}else this._value=this.value;if((null==c?void 0:c.service)!==(null===(l=this.value)||void 0===l?void 0:l.service)){let e=!1;if(this._value&&u){const t=this.value&&!("data"in this.value);this._value.data||(this._value.data={}),u.fields.forEach((i=>{i.selector&&i.required&&void 0===i.default&&"boolean"in i.selector&&void 0===this._value.data[i.key]&&(e=!0,this._value.data[i.key]=!1),t&&i.selector&&void 0!==i.default&&void 0===this._value.data[i.key]&&(e=!0,this._value.data[i.key]=i.default)}))}e&&(0,r.r)(this,"value-changed",{value:{...this._value}})}if(null!==(h=this._value)&&void 0!==h&&h.data){const e=this._yamlEditor;e&&e.value!==this._value.data&&e.setValue(this._value.data)}}},{kind:"field",key:"_getServiceInfo",value:()=>(0,d.A)(((e,t)=>{if(!e||!t)return;const i=(0,n.m)(e),a=(0,h.Y)(e);if(!(i in t))return;if(!(a in t[i]))return;const o=Object.entries(t[i][a].fields).map((([e,t])=>({key:e,...t,selector:t.selector})));return{...t[i][a],fields:o,hasSelector:o.length?o.filter((e=>e.selector)).map((e=>e.key)):[]}}))},{kind:"field",key:"_filterFields",value(){return(0,d.A)(((e,t)=>{var i;return null==e||null===(i=e.fields)||void 0===i?void 0:i.filter((i=>!i.filter||this._filterField(e.target,i.filter,t)))}))}},{kind:"method",key:"_filterField",value:function(e,t,i){var a,o,s,d,r,n,h,u,v,p,f,k,_,m,g;const b=e?{target:e}:{target:{}},$=(null===(a=(0,l.e)((null==i||null===(o=i.target)||void 0===o?void 0:o.entity_id)||(null==i||null===(s=i.data)||void 0===s?void 0:s.entity_id)))||void 0===a?void 0:a.slice())||[],w=(null===(d=(0,l.e)((null==i||null===(r=i.target)||void 0===r?void 0:r.device_id)||(null==i||null===(n=i.data)||void 0===n?void 0:n.device_id)))||void 0===d?void 0:d.slice())||[],x=(null===(h=(0,l.e)((null==i||null===(u=i.target)||void 0===u?void 0:u.area_id)||(null==i||null===(v=i.data)||void 0===v?void 0:v.area_id)))||void 0===h?void 0:h.slice())||[],M=null===(p=(0,l.e)((null==i||null===(f=i.target)||void 0===f?void 0:f.floor_id)||(null==i||null===(k=i.data)||void 0===k?void 0:k.floor_id)))||void 0===p?void 0:p.slice(),C=null===(_=(0,l.e)((null==i||null===(m=i.target)||void 0===m?void 0:m.label_id)||(null==i||null===(g=i.data)||void 0===g?void 0:g.label_id)))||void 0===_?void 0:_.slice();return C&&C.forEach((e=>{const t=(0,y.m0)(this.hass,e,this.hass.areas,this.hass.devices,this.hass.entities,b);w.push(...t.devices),$.push(...t.entities),x.push(...t.areas)})),M&&M.forEach((e=>{const t=(0,y.MH)(this.hass,e,this.hass.areas,b);x.push(...t.areas)})),x.length&&x.forEach((e=>{const t=(0,y.bZ)(this.hass,e,this.hass.devices,this.hass.entities,b);$.push(...t.entities),w.push(...t.devices)})),w.length&&w.forEach((e=>{$.push(...(0,y._7)(this.hass,e,this.hass.entities,b).entities)})),!!$.length&&!!$.some((e=>{var i;const a=this.hass.states[e];return!!a&&(!(null===(i=t.supported_features)||void 0===i||!i.some((e=>(0,c.$)(a,e))))||!(!t.attribute||!Object.entries(t.attribute).some((([e,t])=>e in a.attributes&&((e,t)=>"object"==typeof t?!!Array.isArray(t)&&t.some((t=>e.includes(t))):e.includes(t))(t,a.attributes[e])))))}))}},{kind:"field",key:"_targetSelector",value:()=>(0,d.A)(((e,t)=>{const i=(0,f.z)(t)?[t]:void 0;return e?{target:{...e,create_domains:i}}:{target:{create_domains:i}}}))},{kind:"method",key:"render",value:function(){var e,t,i,a,s,d,l,r;const c=this._getServiceInfo(null===(e=this._value)||void 0===e?void 0:e.service,this.hass.services),u=(null==c?void 0:c.fields.length)&&!c.hasSelector.length||c&&Object.keys((null===(t=this._value)||void 0===t?void 0:t.data)||{}).some((e=>!c.hasSelector.includes(e))),v=u&&(null==c?void 0:c.fields.find((e=>"entity_id"===e.key))),y=Boolean(!u&&(null==c?void 0:c.fields.some((e=>k(e))))),f=this._filterFields(c,this._value),_=null!==(i=this._value)&&void 0!==i&&i.service?(0,n.m)(this._value.service):void 0,m=null!==(a=this._value)&&void 0!==a&&a.service?(0,h.Y)(this._value.service):void 0,g=m&&this.hass.localize(`component.${_}.services.${m}.description`)||(null==c?void 0:c.description);return o.qy`${this.hidePicker?o.s6:o.qy`<ha-service-picker .hass="${this.hass}" .value="${null===(s=this._value)||void 0===s?void 0:s.service}" .disabled="${this.disabled}" @value-changed="${this._serviceChanged}"></ha-service-picker>`} ${this.hideDescription?o.s6:o.qy` <div class="description"> ${g?o.qy`<p>${g}</p>`:""} ${this._manifest?o.qy` <a href="${this._manifest.is_built_in?(0,p.o)(this.hass,`/integrations/${this._manifest.domain}`):this._manifest.documentation}" title="${this.hass.localize("ui.components.service-control.integration_doc")}" target="_blank" rel="noreferrer"> <ha-icon-button .path="${"M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"}" class="help-icon"></ha-icon-button> </a>`:o.s6} </div> `} ${c&&"target"in c?o.qy`<ha-settings-row .narrow="${this.narrow}"> ${y?o.qy`<div slot="prefix" class="checkbox-spacer"></div>`:""} <span slot="heading">${this.hass.localize("ui.components.service-control.target")}</span> <span slot="description">${this.hass.localize("ui.components.service-control.target_description")}</span><ha-selector .hass="${this.hass}" .selector="${this._targetSelector(c.target,_)}" .disabled="${this.disabled}" @value-changed="${this._targetChanged}" .value="${null===(d=this._value)||void 0===d?void 0:d.target}"></ha-selector></ha-settings-row>`:v?o.qy`<ha-entity-picker .hass="${this.hass}" .disabled="${this.disabled}" .value="${null===(l=this._value)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.entity_id}" .label="${this.hass.localize(`component.${_}.services.${m}.fields.entity_id.description`)||v.description}" @value-changed="${this._entityPicked}" allow-custom-entity></ha-entity-picker>`:""} ${u?o.qy`<ha-yaml-editor .hass="${this.hass}" .label="${this.hass.localize("ui.components.service-control.data")}" .name="${"data"}" .readOnly="${this.disabled}" .defaultValue="${null===(r=this._value)||void 0===r?void 0:r.data}" @value-changed="${this._dataChanged}"></ha-yaml-editor>`:null==f?void 0:f.map((e=>{var t,i,a,s,d;const l=null!==(t=null==e?void 0:e.selector)&&void 0!==t?t:{text:void 0},r=Object.keys(l)[0],n=["action","condition","trigger"].includes(r)?{[r]:{...l[r],path:[e.key]}}:l,h=k(e);return e.selector&&(!e.advanced||this.showAdvanced||null!==(i=this._value)&&void 0!==i&&i.data&&void 0!==this._value.data[e.key])?o.qy`<ha-settings-row .narrow="${this.narrow}"> ${h?o.qy`<ha-checkbox .key="${e.key}" .checked="${this._checkedKeys.has(e.key)||(null===(a=this._value)||void 0===a?void 0:a.data)&&void 0!==this._value.data[e.key]}" .disabled="${this.disabled}" @change="${this._checkboxChanged}" slot="prefix"></ha-checkbox>`:y?o.qy`<div slot="prefix" class="checkbox-spacer"></div>`:""} <span slot="heading">${this.hass.localize(`component.${_}.services.${m}.fields.${e.key}.name`)||e.name||e.key}</span> <span slot="description">${this.hass.localize(`component.${_}.services.${m}.fields.${e.key}.description`)||(null==e?void 0:e.description)}</span> <ha-selector .disabled="${this.disabled||h&&!this._checkedKeys.has(e.key)&&(!(null!==(s=this._value)&&void 0!==s&&s.data)||void 0===this._value.data[e.key])}" .hass="${this.hass}" .selector="${n}" .key="${e.key}" @value-changed="${this._serviceDataChanged}" .value="${null!==(d=this._value)&&void 0!==d&&d.data?this._value.data[e.key]:void 0}" .placeholder="${e.default}" .localizeValue="${this._localizeValueCallback}" @item-moved="${this._itemMoved}"></ha-selector> </ha-settings-row>`:""}))} `}},{kind:"field",key:"_localizeValueCallback",value(){return e=>{var t;return null!==(t=this._value)&&void 0!==t&&t.service?this.hass.localize(`component.${(0,n.m)(this._value.service)}.selector.${e}`):""}}},{kind:"method",key:"_checkboxChanged",value:function(e){const t=e.currentTarget.checked,i=e.currentTarget.key;let a;if(t){var o,s;this._checkedKeys.add(i);const e=null===(o=this._getServiceInfo(null===(s=this._value)||void 0===s?void 0:s.service,this.hass.services))||void 0===o?void 0:o.fields.find((e=>e.key===i));let t=null==e?void 0:e.default;var d,l;if(null==t&&null!=e&&e.selector&&"constant"in e.selector)t=null===(d=e.selector.constant)||void 0===d?void 0:d.value;if(null==t&&null!=e&&e.selector&&"boolean"in e.selector&&(t=!1),null!=t)a={...null===(l=this._value)||void 0===l?void 0:l.data,[i]:t}}else{var n;this._checkedKeys.delete(i),a={...null===(n=this._value)||void 0===n?void 0:n.data},delete a[i]}a&&(0,r.r)(this,"value-changed",{value:{...this._value,data:a}}),this.requestUpdate("_checkedKeys")}},{kind:"method",key:"_serviceChanged",value:function(e){var t;if(e.stopPropagation(),e.detail.value===(null===(t=this._value)||void 0===t?void 0:t.service))return;const i=e.detail.value||"";let a;if(i){var o;const e=this._getServiceInfo(i,this.hass.services),t=null===(o=this._value)||void 0===o?void 0:o.target;if(t&&null!=e&&e.target){var s,d,n,h,c,u;const i={target:{...e.target}};let o=(null===(s=(0,l.e)(t.entity_id||(null===(d=this._value.data)||void 0===d?void 0:d.entity_id)))||void 0===s?void 0:s.slice())||[],r=(null===(n=(0,l.e)(t.device_id||(null===(h=this._value.data)||void 0===h?void 0:h.device_id)))||void 0===n?void 0:n.slice())||[],v=(null===(c=(0,l.e)(t.area_id||(null===(u=this._value.data)||void 0===u?void 0:u.area_id)))||void 0===c?void 0:c.slice())||[];v.length&&(v=v.filter((e=>(0,y.Qz)(this.hass,this.hass.entities,this.hass.devices,e,i)))),r.length&&(r=r.filter((e=>(0,y.DF)(this.hass,Object.values(this.hass.entities),this.hass.devices[e],i)))),o.length&&(o=o.filter((e=>(0,y.MM)(this.hass.states[e],i)))),a={...o.length?{entity_id:o}:{},...r.length?{device_id:r}:{},...v.length?{area_id:v}:{}}}}const v={service:i,target:a};(0,r.r)(this,"value-changed",{value:v})}},{kind:"method",key:"_entityPicked",value:function(e){var t,i;e.stopPropagation();const a=e.detail.value;if((null===(t=this._value)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.entity_id)===a)return;let o;var s;!a&&null!==(i=this._value)&&void 0!==i&&i.data?(o={...this._value},delete o.data.entity_id):o={...this._value,data:{...null===(s=this._value)||void 0===s?void 0:s.data,entity_id:e.detail.value}};(0,r.r)(this,"value-changed",{value:o})}},{kind:"method",key:"_targetChanged",value:function(e){var t;e.stopPropagation();const i=e.detail.value;if((null===(t=this._value)||void 0===t?void 0:t.target)===i)return;let a;i?a={...this._value,target:e.detail.value}:(a={...this._value},delete a.target),(0,r.r)(this,"value-changed",{value:a})}},{kind:"method",key:"_serviceDataChanged",value:function(e){var t,i,a;e.stopPropagation();const o=e.currentTarget.key,s=e.detail.value;if((null===(t=this._value)||void 0===t||null===(t=t.data)||void 0===t?void 0:t[o])===s||(null===(i=this._value)||void 0===i||null===(i=i.data)||void 0===i||!i[o])&&(""===s||void 0===s))return;const d={...null===(a=this._value)||void 0===a?void 0:a.data,[o]:s};""!==s&&void 0!==s||delete d[o],(0,r.r)(this,"value-changed",{value:{...this._value,data:d}})}},{kind:"method",key:"_itemMoved",value:function(e){var t,i;e.stopPropagation();const{oldIndex:a,newIndex:o,oldPath:s,newPath:d}=e.detail,l=null!==(t=null===(i=this.value)||void 0===i?void 0:i.data)&&void 0!==t?t:{},n=(0,u.w)(l,a,o,s,d);(0,r.r)(this,"value-changed",{value:{...this.value,data:n}})}},{kind:"method",key:"_dataChanged",value:function(e){e.stopPropagation(),e.detail.isValid&&(0,r.r)(this,"value-changed",{value:{...this._value,data:e.detail.value}})}},{kind:"method",key:"_fetchManifest",value:async function(e){this._manifest=void 0;try{this._manifest=await(0,v.QC)(this.hass,e)}catch(e){}}},{kind:"get",static:!0,key:"styles",value:function(){return o.AH`ha-settings-row{padding:var(--service-control-padding,0 16px)}ha-settings-row{--paper-time-input-justify-content:flex-end;--settings-row-content-width:100%;--settings-row-prefix-display:contents;border-top:var(--service-control-items-border-top,1px solid var(--divider-color))}ha-entity-picker,ha-service-picker,ha-yaml-editor{display:block;margin:var(--service-control-padding,0 16px)}ha-yaml-editor{padding:16px 0}p{margin:var(--service-control-padding,0 16px);padding:16px 0}:host([hidePicker]) p{padding-top:0}.checkbox-spacer{width:32px}ha-checkbox{margin-left:-16px;margin-inline-start:-16px;margin-inline-end:initial}.help-icon{color:var(--secondary-text-color)}.description{justify-content:space-between;display:flex;align-items:center;padding-right:2px;padding-inline-end:2px;padding-inline-start:initial}.description p{direction:ltr}`}}]}}),o.WF)},88680:(e,t,i)=>{var a=i(62659),o=i(40924),s=i(18791),d=i(86625),l=i(7383),r=i(47038),n=i(37382);i(57780),i(1683);(0,a.A)([(0,s.EM)("ha-service-icon")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.MZ)()],key:"service",value:void 0},{kind:"field",decorators:[(0,s.MZ)()],key:"icon",value:void 0},{kind:"method",key:"render",value:function(){if(this.icon)return o.qy`<ha-icon .icon="${this.icon}"></ha-icon>`;if(!this.service)return o.s6;if(!this.hass)return this._renderFallback();const e=(0,n.f$)(this.hass,this.service).then((e=>e?o.qy`<ha-icon .icon="${e}"></ha-icon>`:this._renderFallback()));return o.qy`${(0,d.T)(e)}`}},{kind:"method",key:"_renderFallback",value:function(){const e=(0,r.m)(this.service);return o.qy` <ha-svg-icon .path="${l.n_[e]||l.Gn}"></ha-svg-icon> `}}]}}),o.WF)},44891:(e,t,i)=>{var a=i(62659),o=i(40924),s=i(18791),d=i(45081),l=i(77664),r=i(58587),n=(i(35641),i(39335),i(88680),i(37382));(0,a.A)([(0,s.EM)("ha-service-picker")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,s.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,s.wk)()],key:"_filter",value:void 0},{kind:"method",key:"willUpdate",value:function(){this.hasUpdated||(this.hass.loadBackendTranslation("services"),(0,n.Yd)(this.hass))}},{kind:"field",key:"_rowRenderer",value(){return e=>o.qy`<ha-list-item twoline graphic="icon"> <ha-service-icon slot="graphic" .hass="${this.hass}" .service="${e.service}"></ha-service-icon> <span>${e.name}</span> <span slot="secondary">${e.name===e.service?"":e.service}</span> </ha-list-item>`}},{kind:"method",key:"render",value:function(){return o.qy` <ha-combo-box .hass="${this.hass}" .label="${this.hass.localize("ui.components.service-picker.service")}" .filteredItems="${this._filteredServices(this.hass.localize,this.hass.services,this._filter)}" .value="${this.value}" .disabled="${this.disabled}" .renderer="${this._rowRenderer}" item-value-path="service" item-label-path="name" allow-custom-value @filter-changed="${this._filterChanged}" @value-changed="${this._valueChanged}"></ha-combo-box> `}},{kind:"field",key:"_services",value(){return(0,d.A)(((e,t)=>{if(!t)return[];const i=[];return Object.keys(t).sort().forEach((a=>{const o=Object.keys(t[a]).sort();for(const s of o)i.push({service:`${a}.${s}`,name:`${(0,r.p$)(e,a)}: ${this.hass.localize(`component.${a}.services.${s}.name`)||t[a][s].name||s}`})})),i}))}},{kind:"field",key:"_filteredServices",value(){return(0,d.A)(((e,t,i)=>{if(!t)return[];const a=this._services(e,t);if(!i)return a;const o=i.split(" ");return a.filter((e=>{const t=e.name.toLowerCase(),i=e.service.toLowerCase();return o.every((e=>t.includes(e)||i.includes(e)))}))}))}},{kind:"method",key:"_filterChanged",value:function(e){this._filter=e.detail.value.toLowerCase()}},{kind:"method",key:"_valueChanged",value:function(e){this.value=e.detail.value,(0,l.r)(this,"change"),(0,l.r)(this,"value-changed",{value:this.value})}}]}}),o.WF)},93487:(e,t,i)=>{var a=i(62659),o=i(40924),s=i(18791);(0,a.A)([(0,s.EM)("ha-settings-row")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,s.MZ)({type:Boolean,reflect:!0})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean,attribute:"three-line"})],key:"threeLine",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean,attribute:"wrap-heading",reflect:!0})],key:"wrapHeading",value:()=>!1},{kind:"method",key:"render",value:function(){return o.qy` <div class="prefix-wrap"> <slot name="prefix"></slot> <div class="body" ?two-line="${!this.threeLine}" ?three-line="${this.threeLine}"> <slot name="heading"></slot> <div class="secondary"><slot name="description"></slot></div> </div> </div> <div class="content"><slot></slot></div> `}},{kind:"get",static:!0,key:"styles",value:function(){return o.AH`:host{display:flex;padding:0 16px;align-content:normal;align-self:auto;align-items:center}.body{padding-top:8px;padding-bottom:8px;padding-left:0;padding-inline-start:0;padding-right:16x;padding-inline-end:16px;overflow:hidden;display:var(--layout-vertical_-_display);flex-direction:var(--layout-vertical_-_flex-direction);justify-content:var(--layout-center-justified_-_justify-content);flex:var(--layout-flex_-_flex);flex-basis:var(--layout-flex_-_flex-basis)}.body[three-line]{min-height:var(--paper-item-body-three-line-min-height,88px)}:host(:not([wrap-heading])) body>*{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.body>.secondary{display:block;padding-top:4px;font-family:var(
          --mdc-typography-body2-font-family,
          var(--mdc-typography-font-family, Roboto, sans-serif)
        );-webkit-font-smoothing:antialiased;font-size:var(--mdc-typography-body2-font-size, .875rem);font-weight:var(--mdc-typography-body2-font-weight,400);line-height:normal;color:var(--secondary-text-color)}.body[two-line]{min-height:calc(var(--paper-item-body-two-line-min-height,72px) - 16px);flex:1}.content{display:contents}:host(:not([narrow])) .content{display:var(--settings-row-content-display,flex);justify-content:flex-end;flex:1;padding:16px 0}.content ::slotted(*){width:var(--settings-row-content-width)}:host([narrow]){align-items:normal;flex-direction:column;border-top:1px solid var(--divider-color);padding-bottom:8px}::slotted(ha-switch){padding:16px 0}.secondary{white-space:normal}.prefix-wrap{display:var(--settings-row-prefix-display)}:host([narrow]) .prefix-wrap{display:flex;align-items:center}`}}]}}),o.WF)},20520:(e,t,i)=>{var a=i(62659),o=i(76504),s=i(80792),d=i(47420),l=i(40924),r=i(18791),n=i(77664),h=i(14126),c=(i(26250),i(75610)),u=i(36639);(0,a.A)([(0,r.EM)("ha-yaml-editor")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"yamlSchema",value:()=>d.DEFAULT_SCHEMA},{kind:"field",decorators:[(0,r.MZ)()],key:"defaultValue",value:void 0},{kind:"field",decorators:[(0,r.MZ)({type:Boolean})],key:"isValid",value:()=>!0},{kind:"field",decorators:[(0,r.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,r.MZ)({type:Boolean})],key:"autoUpdate",value:()=>!1},{kind:"field",decorators:[(0,r.MZ)({type:Boolean})],key:"readOnly",value:()=>!1},{kind:"field",decorators:[(0,r.MZ)({type:Boolean})],key:"required",value:()=>!1},{kind:"field",decorators:[(0,r.MZ)({type:Boolean})],key:"copyClipboard",value:()=>!1},{kind:"field",decorators:[(0,r.wk)()],key:"_yaml",value:()=>""},{kind:"method",key:"setValue",value:function(e){try{this._yaml=e&&!(e=>{if("object"!=typeof e)return!1;for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0})(e)?(0,d.dump)(e,{schema:this.yamlSchema,quotingType:'"',noRefs:!0}):""}catch(t){console.error(t,e),alert(`There was an error converting to YAML: ${t}`)}}},{kind:"method",key:"firstUpdated",value:function(){this.defaultValue&&this.setValue(this.defaultValue)}},{kind:"method",key:"willUpdate",value:function(e){(0,o.A)((0,s.A)(i.prototype),"willUpdate",this).call(this,e),this.autoUpdate&&e.has("value")&&this.setValue(this.value)}},{kind:"method",key:"render",value:function(){return void 0===this._yaml?l.s6:l.qy` ${this.label?l.qy`<p>${this.label}${this.required?" *":""}</p>`:""} <ha-code-editor .hass="${this.hass}" .value="${this._yaml}" .readOnly="${this.readOnly}" mode="yaml" autocomplete-entities autocomplete-icons .error="${!1===this.isValid}" @value-changed="${this._onChange}" dir="ltr"></ha-code-editor> ${this.copyClipboard?l.qy`<div class="card-actions"> <mwc-button @click="${this._copyYaml}"> ${this.hass.localize("ui.components.yaml-editor.copy_to_clipboard")} </mwc-button> </div>`:l.s6} `}},{kind:"method",key:"_onChange",value:function(e){let t;e.stopPropagation(),this._yaml=e.detail.value;let i=!0;if(this._yaml)try{t=(0,d.load)(this._yaml,{schema:this.yamlSchema})}catch(e){i=!1}else t={};this.value=t,this.isValid=i,(0,n.r)(this,"value-changed",{value:t,isValid:i})}},{kind:"get",key:"yaml",value:function(){return this._yaml}},{kind:"method",key:"_copyYaml",value:async function(){this.yaml&&(await(0,u.l)(this.yaml),(0,c.P)(this,{message:this.hass.localize("ui.common.copied_clipboard")}))}},{kind:"get",static:!0,key:"styles",value:function(){return[h.RF,l.AH`.card-actions{border-radius:var(--actions-border-radius,0px 0px var(--ha-card-border-radius,12px) var(--ha-card-border-radius,12px));border:1px solid var(--divider-color);padding:5px 16px}ha-code-editor{flex-grow:1}`]}}]}}),l.WF)}};
//# sourceMappingURL=87996.An-4CaTmW6M.js.map