"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[6988],{28048:function(t,e,i){i.d(e,{c:function(){return f}});i(21950),i(63243),i(68113),i(56262),i(8339);var n=i(76502),s=i(92849),r=i(1471),a=i(47038),o=i(24081),h=i(83378),u=i(69825),c={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};var d=0,l=new Map;function f(t,e,i){return function(t,e,i){var n;if(!i||t===h.Hh)return(0,u.a)("--history-unavailable-color",e);if(t===h.HV)return(0,u.a)("--history-unknown-color",e);var d=(0,o.mg)(i,t);if(d){var l=(0,u.a)(d,e);if(l){var f=(0,a.m)(i.entity_id),_=null===(n=c[f])||void 0===n?void 0:n[t];return _?(0,s.zm)((0,r.T)((0,s.Nc)((0,s.xp)(l)),_)):l}}}(t,e,i)||function(t,e){if(l.has(t))return l.get(t);var i=(0,n.fI)(d,e);return d++,l.set(t,i),i}(t,e)}},24349:function(t,e,i){var n=i(1781),s=i(94881);i.a(t,function(){var t=n(s().mark((function t(n,r){var a,o,h,u,c,d,l,f,_,y,v,k,p,b,m,g,w,H,x,A,L,I,S,T,C,E,z,M,D,O,Y,q,U,j,F,G,R,Z,K,N,W,P,Q;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i.r(e),i.d(e,{DEFAULT_HOURS_TO_SHOW:function(){return P},HuiHistoryGraphCard:function(){return Q}}),a=i(6238),o=i(94881),h=i(1781),u=i(36683),c=i(89231),d=i(29864),l=i(83647),f=i(8364),_=i(76504),y=i(80792),v=i(27934),i.n(v),k=i(77052),i.n(k),p=i(21950),i.n(p),b=i(53156),i.n(b),m=i(71936),i.n(m),g=i(848),i.n(g),w=i(43859),i.n(w),H=i(68113),i.n(H),x=i(55888),i.n(x),A=i(56262),i.n(A),L=i(66274),i.n(L),I=i(84531),i.n(I),S=i(34290),i.n(S),T=i(8339),i.n(T),C=i(40924),E=i(196),z=i(69760),M=i(6699),D=i(1954),i(12261),i(54373),i(12731),O=i(62665),Y=i(96951),q=i(15821),U=i(67990),j=i(19887),!(F=n([D,O])).then){t.next=62;break}return t.next=58,F;case 58:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=63;break;case 62:t.t0=F;case 63:G=t.t0,D=G[0],O=G[1],"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z",P=24,Q=(0,f.A)([(0,E.EM)("hui-history-graph-card")],(function(t,e){var n,s,r=function(e){function i(){var e;(0,c.A)(this,i);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=(0,d.A)(this,i,[].concat(s)),t(e),e}return(0,l.A)(i,e),(0,u.A)(i)}(e);return{F:r,d:[{kind:"method",static:!0,key:"getConfigElement",value:(s=(0,h.default)((0,o.default)().mark((function t(){return(0,o.default)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([i.e(27311),i.e(88201),i.e(61606),i.e(23006),i.e(38696),i.e(32839),i.e(37160),i.e(37e3)]).then(i.bind(i,37e3));case 2:return t.abrupt("return",document.createElement("hui-history-graph-card-editor"));case 3:case"end":return t.stop()}}),t)}))),function(){return s.apply(this,arguments)})},{kind:"method",static:!0,key:"getStubConfig",value:function(){return{type:"history-graph",entities:["sun.sun"]}}},{kind:"field",decorators:[(0,E.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,E.wk)()],key:"_stateHistory",value:void 0},{kind:"field",decorators:[(0,E.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,E.wk)()],key:"_error",value:void 0},{kind:"field",key:"_names",value:function(){return{}}},{kind:"field",key:"_entityIds",value:function(){return[]}},{kind:"field",key:"_hoursToShow",value:function(){return P}},{kind:"field",key:"_interval",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"method",key:"getCardSize",value:function(){var t,e;return null!==(t=this._config)&&void 0!==t&&t.title?2:0+2*((null===(e=this._entityIds)||void 0===e?void 0:e.length)||1)}},{kind:"method",key:"setConfig",value:function(t){var e=this;if(!t.entities||!Array.isArray(t.entities))throw new Error("Entities need to be an array");if(!t.entities.length)throw new Error("You must include at least one entity");var i=t.entities?(0,U.L)(t.entities):[];this._entityIds=[],i.forEach((function(t){e._entityIds.push(t.entity),t.name&&(e._names[t.entity]=t.name)})),this._hoursToShow=t.hours_to_show||P,this._config=t}},{kind:"method",key:"connectedCallback",value:function(){(0,_.A)((0,y.A)(r.prototype),"connectedCallback",this).call(this),this.hasUpdated&&this._subscribeHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,_.A)((0,y.A)(r.prototype),"disconnectedCallback",this).call(this),this._unsubscribeHistory()}},{kind:"method",key:"_subscribeHistory",value:(n=(0,h.default)((0,o.default)().mark((function t(){var e,i,n=this;return(0,o.default)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,M.x)(this.hass,"history")&&!this._subscribed){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,(0,Y.KL)(this.hass);case 4:e=t.sent,i=e.numeric_device_classes,this._subscribed=(0,O.IQ)(this.hass,(function(t){var e;n._subscribed&&(n._stateHistory=(0,O.Mm)(n.hass,t,n._entityIds,n.hass.localize,i,null===(e=n._config)||void 0===e?void 0:e.split_device_classes))}),this._hoursToShow,this._entityIds).catch((function(t){n._subscribed=void 0,n._error=t})),this._setRedrawTimer();case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"_redrawGraph",value:function(){this._stateHistory&&(this._stateHistory=Object.assign({},this._stateHistory))}},{kind:"method",key:"_setRedrawTimer",value:function(){var t=this;clearInterval(this._interval),this._interval=window.setInterval((function(){return t._redrawGraph()}),6e4)}},{kind:"method",key:"_unsubscribeHistory",value:function(){clearInterval(this._interval),this._subscribed&&(this._subscribed.then((function(t){return null==t?void 0:t()})),this._subscribed=void 0)}},{kind:"method",key:"shouldUpdate",value:function(t){return(0,q.pY)(this,t)||t.size>1||!t.has("hass")}},{kind:"method",key:"updated",value:function(t){if((0,_.A)((0,y.A)(r.prototype),"updated",this).call(this,t),this._config&&this.hass&&this._hoursToShow&&this._entityIds.length&&(t.has("_config")||t.has("hass"))){var e=t.get("_config");!t.has("_config")||(null==e?void 0:e.entities)===this._config.entities&&(null==e?void 0:e.hours_to_show)===this._config.hours_to_show||(this._unsubscribeHistory(),this._subscribeHistory())}}},{kind:"method",key:"render",value:function(){if(!this.hass||!this._config)return C.s6;var t=new Date;t.setHours(t.getHours()-this._hoursToShow);var e="/history?".concat((0,j.KH)({entity_id:this._entityIds.join(","),start_date:t.toISOString()}));return(0,C.qy)(R||(R=(0,a.A)([" <ha-card> ",' <div class="content ','"> '," </div> </ha-card> "])),this._config.title?(0,C.qy)(Z||(Z=(0,a.A)([' <h1 class="card-header"> ',' <a href="','"><ha-icon-button .path="','"></ha-icon-button></a> </h1> '])),this._config.title,e,"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"):C.s6,(0,z.H)({"has-header":!!this._config.title}),this._error?(0,C.qy)(K||(K=(0,a.A)([' <ha-alert alert-type="error"> ',": "," </ha-alert> "])),this.hass.localize("ui.components.history_charts.error"),this._error.message||this._error.code):(0,C.qy)(N||(N=(0,a.A)([' <state-history-charts .hass="','" .isLoadingData="','" .historyData="','" .names="','" up-to-now .hoursToShow="','" .showNames="','" .logarithmicScale="','" .minYAxis="','" .maxYAxis="','" .fitYData="','"></state-history-charts> '])),this.hass,!this._stateHistory,this._stateHistory,this._names,this._hoursToShow,void 0===this._config.show_names||this._config.show_names,this._config.logarithmic_scale||!1,this._config.min_y_axis,this._config.max_y_axis,this._config.fit_y_data||!1))}},{kind:"get",static:!0,key:"styles",value:function(){return(0,C.AH)(W||(W=(0,a.A)(["ha-card{height:100%}.card-header{justify-content:space-between;display:flex}.card-header ha-icon-button{--mdc-icon-button-size:24px;line-height:24px;color:var(--primary-text-color)}.content{padding:16px}.has-header{padding-top:0}"])))}}]}}),C.WF),r(),t.next=75;break;case 72:t.prev=72,t.t2=t.catch(0),r(t.t2);case 75:case"end":return t.stop()}}),t,null,[[0,72]])})));return function(e,i){return t.apply(this,arguments)}}())}}]);
//# sourceMappingURL=6988.oXt_v44DYNI.js.map