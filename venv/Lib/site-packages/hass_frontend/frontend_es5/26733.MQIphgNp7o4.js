"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[26733],{36471:function(e,t,n){n.d(t,{_:function(){return u}});var a=n(539),i=n(89231),r=n(36683),c=n(29864),o=n(83647),s=(n(27934),n(21968),n(68113),n(66274),n(84531),n(34290),n(40924)),l=n(3358),u=(0,l.u$)(function(e){function t(e){var n;if((0,i.A)(this,t),(n=(0,c.A)(this,t,[e]))._element=void 0,e.type!==l.OA.CHILD)throw new Error("dynamicElementDirective can only be used in content bindings");return n}return(0,o.A)(t,e),(0,r.A)(t,[{key:"update",value:function(e,t){var n=this,i=(0,a.A)(t,2),r=i[0],c=i[1];return this._element&&this._element.localName===r?(c&&Object.entries(c).forEach((function(e){var t=(0,a.A)(e,2),i=t[0],r=t[1];n._element[i]=r})),s.c0):this.render(r,c)}},{key:"render",value:function(e,t){var n=this;return this._element=document.createElement(e),t&&Object.entries(t).forEach((function(e){var t=(0,a.A)(e,2),i=t[0],r=t[1];n._element[i]=r})),this._element}}])}(l.WL))},66339:function(e,t,n){n.r(t),n.d(t,{HuiStatisticCardEditor:function(){return w}});var a,i=n(94881),r=n(1781),c=n(6238),o=n(539),s=n(36683),l=n(89231),u=n(29864),d=n(83647),h=n(8364),f=(n(77052),n(53501),n(36724),n(848),n(43859),n(21968),n(1158),n(68113),n(34517),n(66274),n(84531),n(98168),n(34290),n(40924)),p=n(196),m=n(45081),_=n(63428),v=n(77664),k=n(61314),y=(n(23006),n(74959)),g=n(7214),b=n(2977),j=(0,_.kp)(b.H,(0,_.Ik)({entity:(0,_.lq)((0,_.Yj)()),name:(0,_.lq)((0,_.Yj)()),icon:(0,_.lq)((0,_.Yj)()),unit:(0,_.lq)((0,_.Yj)()),stat_type:(0,_.lq)((0,_.Yj)()),period:(0,_.lq)((0,_.bz)()),theme:(0,_.lq)((0,_.Yj)()),footer:(0,_.lq)(g.zb)})),q=["mean","min","max","change"],Y={mean:"mean",min:"min",max:"max",change:"sum"},x={today:{calendar:{period:"day"}},yesterday:{calendar:{period:"day",offset:-1}},this_week:{calendar:{period:"week"}},last_week:{calendar:{period:"week",offset:-1}},this_month:{calendar:{period:"month"}},last_month:{calendar:{period:"month",offset:-1}},this_year:{calendar:{period:"year"}},last_year:{calendar:{period:"year",offset:-1}}},w=(0,h.A)([(0,p.EM)("hui-statistic-card-editor")],(function(e,t){var n,h,g=function(t){function n(){var t;(0,l.A)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=(0,u.A)(this,n,[].concat(i)),e(t),t}return(0,d.A)(n,t),(0,s.A)(n)}(t);return{F:g,d:[{kind:"field",decorators:[(0,p.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,p.wk)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,p.wk)()],key:"_metadata",value:void 0},{kind:"method",key:"setConfig",value:function(e){(0,_.vA)(e,j),this._config=e,this._fetchMetadata()}},{kind:"method",key:"firstUpdated",value:function(){var e=this;this._fetchMetadata().then((function(){var t,n,a;null!==(t=e._config)&&void 0!==t&&t.stat_type||null===(n=e._config)||void 0===n||!n.entity||(0,v.r)(e,"config-changed",{config:Object.assign(Object.assign({},e._config),{},{stat_type:null!==(a=e._metadata)&&void 0!==a&&a.has_sum?"change":"mean"})})}))}},{kind:"field",key:"_data",value:function(){return(0,m.A)((function(e){if(!e||!e.period)return e;for(var t=0,n=Object.entries(x);t<n.length;t++){var a=(0,o.A)(n[t],2),i=a[0],r=a[1];if((0,k.b)(r,e.period))return Object.assign(Object.assign({},e),{},{period:i})}return e}))}},{kind:"field",key:"_schema",value:function(){return(0,m.A)((function(e,t,n){return[{name:"entity",required:!0,selector:{statistic:{}}},{name:"stat_type",required:!0,selector:{select:{multiple:!1,options:q.map((function(e){return{value:e,label:t("ui.panel.lovelace.editor.card.statistic.stat_type_labels.".concat(e)),disabled:!n||!(0,y.nN)(n,Y[e])}}))}}},{name:"period",required:!0,selector:e&&Object.keys(x).includes(e)?{select:{multiple:!1,options:Object.keys(x).map((function(e){return{value:e,label:t("ui.panel.lovelace.editor.card.statistic.periods.".concat(e))||e}}))}}:{object:{}}},{type:"grid",name:"",schema:[{name:"name",selector:{text:{}}},{name:"icon",selector:{icon:{}},context:{icon_entity:"entity"}},{name:"unit",selector:{text:{}}},{name:"theme",selector:{theme:{}}}]}]}))}},{kind:"method",key:"render",value:function(){if(!this.hass||!this._config)return f.s6;var e=this._data(this._config),t=this._schema("string"==typeof e.period?e.period:void 0,this.hass.localize,this._metadata);return(0,f.qy)(a||(a=(0,c.A)([' <ha-form .hass="','" .data="','" .schema="','" .computeLabel="','" @value-changed="','"></ha-form> '])),this.hass,e,t,this._computeLabelCallback,this._valueChanged)}},{kind:"method",key:"_fetchMetadata",value:(h=(0,r.default)((0,i.default)().mark((function e(){return(0,i.default)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hass&&this._config){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,y.Wr)(this.hass,[this._config.entity]);case 4:this._metadata=e.sent[0];case 5:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{kind:"method",key:"_valueChanged",value:(n=(0,r.default)((0,i.default)().mark((function e(t){var n,a,r,c,o,s,l;return(0,i.default)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object.assign({},t.detail.value),Object.keys(a).forEach((function(e){return""===a[e]&&delete a[e]})),"string"==typeof a.period&&(r=x[a.period])&&(a.period=r),!a.stat_type||!a.entity||a.entity===(null===(n=this._metadata)||void 0===n?void 0:n.statistic_id)){e.next=18;break}return e.next=6,(0,y.Wr)(this.hass,[a.entity]);case 6:if(e.t1=c=e.sent,e.t0=null===e.t1,e.t0){e.next=10;break}e.t0=void 0===c;case 10:if(!e.t0){e.next=14;break}e.t2=void 0,e.next=15;break;case 14:e.t2=c[0];case 15:(o=e.t2)&&!o.has_sum&&"change"===a.stat_type&&(a.stat_type="mean"),o&&!o.has_mean&&"change"!==a.stat_type&&(a.stat_type="change");case 18:if(a.stat_type||!a.entity){e.next=32;break}return e.next=21,(0,y.Wr)(this.hass,[a.entity]);case 21:if(e.t4=s=e.sent,e.t3=null===e.t4,e.t3){e.next=25;break}e.t3=void 0===s;case 25:if(!e.t3){e.next=29;break}e.t5=void 0,e.next=30;break;case 29:e.t5=s[0];case 30:l=e.t5,a.stat_type=null!=l&&l.has_sum?"change":"mean";case 32:(0,v.r)(this,"config-changed",{config:a});case 33:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{kind:"field",key:"_computeLabelCallback",value:function(){var e=this;return function(t){return"period"===t.name?e.hass.localize("ui.panel.lovelace.editor.card.statistic.period"):"theme"===t.name?"".concat(e.hass.localize("ui.panel.lovelace.editor.card.generic.theme")," (").concat(e.hass.localize("ui.panel.lovelace.editor.card.config.optional"),")"):e.hass.localize("ui.panel.lovelace.editor.card.generic.".concat(t.name))}}}]}}),f.WF)},54293:function(e,t,n){n.d(t,{k:function(){return h}});var a=n(67234),i=n(63428),r=(0,i.Ik)({user:(0,i.Yj)()}),c=(0,i.KC)([(0,i.zM)(),(0,i.Ik)({text:(0,i.lq)((0,i.Yj)()),excemptions:(0,i.lq)((0,i.YO)(r))})]),o=(0,i.Ik)({action:(0,i.eu)("url"),url_path:(0,i.Yj)(),confirmation:(0,i.lq)(c)}),s=(0,i.Ik)({action:(0,i.eu)("call-service"),service:(0,i.Yj)(),service_data:(0,i.lq)((0,i.Ik)()),data:(0,i.lq)((0,i.Ik)()),target:(0,i.lq)((0,i.Ik)({entity_id:(0,i.lq)((0,i.KC)([(0,i.Yj)(),(0,i.YO)((0,i.Yj)())])),device_id:(0,i.lq)((0,i.KC)([(0,i.Yj)(),(0,i.YO)((0,i.Yj)())])),area_id:(0,i.lq)((0,i.KC)([(0,i.Yj)(),(0,i.YO)((0,i.Yj)())]))})),confirmation:(0,i.lq)(c)}),l=(0,i.Ik)({action:(0,i.eu)("navigate"),navigation_path:(0,i.Yj)(),navigation_replace:(0,i.lq)((0,i.zM)()),confirmation:(0,i.lq)(c)}),u=(0,i.NW)({action:(0,i.eu)("assist"),pipeline_id:(0,i.lq)((0,i.Yj)()),start_listening:(0,i.lq)((0,i.zM)())}),d=(0,i.Ik)({action:(0,i.vP)(["none","toggle","more-info","call-service","url","navigate","assist"]),confirmation:(0,i.lq)(c)}),h=(0,i.OR)((function(e){if(e&&"object"===(0,a.A)(e)&&"action"in e)switch(e.action){case"call-service":return s;case"navigate":return l;case"url":return o;case"assist":return u}return d}))},2977:function(e,t,n){n.d(t,{H:function(){return i}});var a=n(63428),i=(0,a.Ik)({type:(0,a.Yj)(),view_layout:(0,a.bz)(),layout_options:(0,a.bz)()})},63775:function(e,t,n){n.d(t,{J:function(){return r}});var a=n(63428),i=n(54293),r=(0,a.Ik)({entity:(0,a.Yj)(),name:(0,a.lq)((0,a.Yj)()),icon:(0,a.lq)((0,a.Yj)()),image:(0,a.lq)((0,a.Yj)()),show_name:(0,a.lq)((0,a.zM)()),show_icon:(0,a.lq)((0,a.zM)()),tap_action:(0,a.lq)(i.k),hold_action:(0,a.lq)(i.k),double_tap_action:(0,a.lq)(i.k)})},7214:function(e,t,n){n.d(t,{oe:function(){return l},zb:function(){return u}});var a=n(67234),i=n(63428),r=n(54293),c=n(63775),o=(0,i.Ik)({type:(0,i.Yj)(),image:(0,i.Yj)(),tap_action:(0,i.lq)(r.k),hold_action:(0,i.lq)(r.k),double_tap_action:(0,i.lq)(r.k),alt_text:(0,i.lq)((0,i.Yj)())}),s=(0,i.Ik)({type:(0,i.Yj)(),entities:(0,i.YO)(c.J)}),l=(0,i.Ik)({type:(0,i.Yj)(),entity:(0,i.Yj)(),detail:(0,i.lq)((0,i.ai)()),hours_to_show:(0,i.lq)((0,i.ai)())}),u=(0,i.OR)((function(e){if(e&&"object"===(0,a.A)(e)&&"type"in e)switch(e.type){case"buttons":return s;case"graph":return l;case"picture":return o}return(0,i.KC)([s,l,o])}))}}]);
//# sourceMappingURL=26733.MQIphgNp7o4.js.map