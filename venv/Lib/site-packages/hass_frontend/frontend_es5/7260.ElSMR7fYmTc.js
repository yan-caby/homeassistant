"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[7260],{28514:function(e,t,n){n.d(t,{p:function(){return r}});n(77052),n(75658),n(98828),n(97754);var i=[" ",": "],r=function(e,t){for(var n=e.toLowerCase(),r=0,o=i;r<o.length;r++){var s=o[r],u="".concat(t).concat(s);if(n.startsWith(u)){var c=e.substring(u.length);if(c.length)return a(c.substr(0,c.indexOf(" ")))?c:c[0].toUpperCase()+c.slice(1)}}},a=function(e){return e.toLowerCase()!==e}},17876:function(e,t,n){n.d(t,{L:function(){return r},z:function(){return a}});var i=n(1751),r=["input_boolean","input_button","input_text","input_number","input_datetime","input_select","counter","timer","schedule"],a=(0,i.g)(r)},7260:function(e,t,n){n.d(t,{Bi:function(){return m},ZI:function(){return _},Yp:function(){return b}});var i=n(61780),r=n(66123),a=n(539),o=(n(77052),n(69466),n(4187),n(53501),n(21950),n(36724),n(71936),n(14460),n(62859),n(848),n(43859),n(21968),n(1158),n(68113),n(84368),n(57733),n(34517),n(56262),n(64148),n(66274),n(85038),n(85767),n(84531),n(98168),n(15445),n(24483),n(13478),n(46355),n(14612),n(53691),n(48455),n(34290),n(8339),n(7383)),s=n(47038),u=n(66596),c=n(82931),l=n(28514),d=n(95507),p=n(86464),f=n(58587),y=n(35978),v=n(17876),h=new Set(["automation","configurator","conversation","device_tracker","geo_location","persistent_notification","script","sun","zone","event","tts","stt","todo"]),g=new Set(["mobile_app"]),_=function(e,t){return Object.assign({type:"grid",cards:e.map((function(e){return{type:"tile",entity:e,show_entity_picture:["person","camera","image"].includes((0,s.m)(e))||void 0}}))},t)},m=function e(t,n,i){var a,u=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],p=[],f=[],y=i.title?i.title.toLowerCase():void 0,v=[],h=(0,r.A)(n);try{for(h.s();!(a=h.n()).done;){var g=a.value,_=t[g],m=(0,s.m)(g);if("alarm_control_panel"===m){var b={type:"alarm-panel",entity:g};p.push(b)}else if("camera"===m){var w={type:"picture-entity",entity:g};p.push(w)}else if("image"===m){var E={type:"picture",image_entity:g};p.push(E)}else if("climate"===m){var j,k,x,A={type:"thermostat",entity:g,features:(null!==(j=null===(k=t[g])||void 0===k||null===(k=k.attributes)||void 0===k||null===(k=k.hvac_modes)||void 0===k?void 0:k.length)&&void 0!==j?j:0)>1?[{type:"climate-hvac-modes",hvac_modes:null===(x=t[g])||void 0===x||null===(x=x.attributes)||void 0===x?void 0:x.hvac_modes}]:void 0};p.push(A)}else if("humidifier"===m){var C={type:"humidifier",entity:g,features:[{type:"humidifier-toggle"}]};p.push(C)}else if("media_player"===m){var O={type:"media-control",entity:g};p.push(O)}else if("plant"===m){var W={type:"plant-status",entity:g};p.push(W)}else if("weather"===m){var L={type:"weather-forecast",entity:g,show_forecast:!1};p.push(L)}else if(!u||"scene"!==m&&"script"!==m){var S=void 0,z=y&&_&&(S=(0,l.p)((0,c.u)(_),y))?{entity:g,name:S}:g;f.push(z)}else{var I={entity:g,show_icon:!0,show_name:!0},P=void 0;y&&_&&(P=(0,l.p)((0,c.u)(_),y))&&(I.name=P),v.push(I)}}}catch(V){h.e(V)}finally{h.f()}if(f.sort((function(e,n){var i="string"==typeof e?e:e.entity,r="string"==typeof n?n:n.entity,a=o.JF.includes((0,s.m)(i))?"sensor":"control";return a!==(o.JF.includes((0,s.m)(r))?"sensor":"control")?"sensor"===a?1:-1:(0,d.x)("string"==typeof e?t[e]?(0,c.u)(t[e]):"":e.name||"","string"==typeof n?t[n]?(0,c.u)(t[n]):"":n.name||"")})),0===f.length&&v.length>0)return e(t,n,i,!1);if(f.length>0||v.length>0){var U=Object.assign({type:"entities",entities:f},i);v.length>0&&(U.footer={type:"buttons",entities:v}),p.unshift(U)}return p.length<2?p:[{type:"grid",square:!1,columns:1,cards:p}]},b=function(e,t,n,o,l,_,b,w,E){for(var j,k,x=function(e,t){for(var n={},i=new Set(Object.values(t).filter((function(e){return e.entity_category||e.platform&&g.has(e.platform)||e.hidden})).map((function(e){return e.entity_id}))),r=0,a=Object.keys(e);r<a.length;r++){var o=a[r],s=e[o];h.has((0,u.t)(s))||i.has(s.entity_id)||(n[o]=e[o])}return n}(o,n),A={},C=0,O=Object.keys(x);C<O.length;C++){var W=O[C],L=x[W];L.attributes.order&&(A[W]=L.attributes.order)}var S=function(e,t,n,i){for(var r=Object.assign({},i),o={},s={},u=0,c=Object.values(n);u<c.length;u++){var l,d=c[u],p=d.area_id||d.device_id&&(null===(l=t[d.device_id])||void 0===l?void 0:l.area_id);p&&p in e&&d.entity_id in r?(p in o||(o[p]=[]),o[p].push(r[d.entity_id]),delete r[d.entity_id]):d.device_id&&d.device_id in t&&d.entity_id in r&&(d.device_id in s||(s[d.device_id]=[]),s[d.device_id].push(r[d.entity_id]),delete r[d.entity_id])}for(var f=0,y=Object.entries(s);f<y.length;f++){var v=(0,a.A)(y[f],2),h=v[0],g=v[1];1===g.length&&(r[g[0].entity_id]=g[0],delete s[h])}return{areasWithEntities:o,devicesWithEntities:s,otherEntities:r}}(e,t,n,x);if(null!=b&&b.hidden){var z,I=(0,r.A)(b.hidden);try{for(I.s();!(z=I.n()).done;){var P=z.value;delete S.areasWithEntities[P]}}catch(re){I.e(re)}finally{I.f()}}w&&(S.devicesWithEntities={},S.otherEntities={});var U=function(e){var t=[],n={};return Object.keys(e).forEach((function(i){var r=e[i];"group"===(0,s.m)(i)?t.push(r):n[i]=r})),t.forEach((function(e){return e.attributes.entity_id.forEach((function(e){delete n[e]}))})),{groups:t,ungrouped:n}}(S.otherEntities);U.groups.sort((function(e,t){return A[e.entity_id]-A[t.entity_id]}));var V,q=[],B=(0,r.A)(U.groups);try{for(B.s();!(V=B.n()).done;){var F=V.value;q.push.apply(q,(0,i.A)(m(o,F.attributes.entity_id,{title:(0,c.u)(F),show_header_toggle:"hidden"!==F.attributes.control})))}}catch(re){B.e(re)}finally{B.f()}var J,R=function(e,t,n,a,o){for(var s={},l=0,p=Object.keys(o);l<p.length;l++){var h=p[l],g=o[h],_=(0,u.t)(g);_ in s||(s[_]=[]),s[_].push(g.entity_id)}var b=[];if("person"in s){var w=[];if(1===s.person.length)b.push({type:"entities",entities:s.person});else{var E,j,k="",x=(0,r.A)(s.person);try{for(x.s();!(j=x.n()).done;){var A=j.value,C=o[A],O=C.attributes.entity_picture;if(!O){if(void 0===E){var W=getComputedStyle(document.body);E=encodeURIComponent(W.getPropertyValue("--light-primary-color").trim()),k=encodeURIComponent((W.getPropertyValue("--text-light-primary-color")||W.getPropertyValue("--primary-text-color")).trim())}var L=(0,y._2)(C.attributes.friendly_name||"");O="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' width='50' height='50' style='background-color:".concat(E,"'%3E%3Cg%3E%3Ctext font-family='roboto' x='50%25' y='50%25' text-anchor='middle' stroke='").concat(k,"' font-size='1.3em' dy='.3em'%3E").concat(L,"%3C/text%3E%3C/g%3E%3C/svg%3E")}w.push({type:"picture-entity",entity:A,aspect_ratio:"1",show_name:!1,image:O})}}catch(re){x.e(re)}finally{x.f()}b.push({type:"grid",square:!0,columns:3,cards:w})}delete s.person}var S,z=[],I=(0,r.A)(v.L);try{for(I.s();!(S=I.n()).done;){var P=S.value;P in s&&(z.push.apply(z,(0,i.A)(s[P])),delete s[P])}}catch(re){I.e(re)}finally{I.f()}for(var U={},V=0,q=Object.keys(s);V<q.length;V++){var B=q[V];U[B]=(0,f.p$)(e,B)}z.length&&(s._helpers=z,U._helpers=e("ui.panel.lovelace.strategy.original-states.helpers")),Object.keys(s).sort((function(e,t){return(0,d.x)(U[e],U[t])})).forEach((function(e){b.push.apply(b,(0,i.A)(m(o,s[e].sort((function(e,t){return(0,d.x)((0,c.u)(o[e]),(0,c.u)(o[t]))})),{title:U[e]})))}));var F={path:t,title:n,cards:b};return a&&(F.icon=a),F}(l,"default_view","Home",undefined,U.ungrouped),H=[],Y=Object.keys(S.areasWithEntities).sort((0,p.dj)(e,null==b?void 0:b.order)),Z=(0,r.A)(Y);try{for(Z.s();!(J=Z.n()).done;){var $=J.value,D=S.areasWithEntities[$],G=e[$];H.push.apply(H,(0,i.A)(m(o,D.map((function(e){return e.entity_id})),{title:G.name})))}}catch(re){Z.e(re)}finally{Z.f()}var K,M,N=[],Q=Object.entries(S.devicesWithEntities).sort((function(e,n){var i=t[e[0]],r=t[n[0]];return(0,d.x)(i.name_by_user||i.name||"",r.name_by_user||r.name||"")})),T=(0,r.A)(Q);try{for(T.s();!(K=T.n()).done;){var X=(0,a.A)(K.value,2),ee=X[0],te=X[1],ne=t[ee];N.push.apply(N,(0,i.A)(m(o,te.map((function(e){return e.entity_id})),{title:ne.name_by_user||ne.name||l("ui.panel.config.devices.unnamed_device",{type:l("ui.panel.config.devices.type.".concat(ne.entry_type||"device"))})})))}}catch(re){T.e(re)}finally{T.f()}if(_&&!E){var ie=_.energy_sources.find((function(e){return"grid"===e.type}));ie&&ie.flow_from.length>0&&(M={title:l("ui.panel.lovelace.cards.energy.energy_distribution.title_today"),type:"energy-distribution",link_dashboard:!0})}return(j=R.cards).unshift.apply(j,H.concat(q,(0,i.A)(M?[M]:[]))),(k=R.cards).push.apply(k,N),R}}}]);
//# sourceMappingURL=7260.ElSMR7fYmTc.js.map